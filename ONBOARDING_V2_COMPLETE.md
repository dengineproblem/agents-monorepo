# ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ AI-—Ç–∞—Ä–≥–µ—Ç–æ–ª–æ–≥ v2 - –ó–ê–í–ï–†–®–ï–ù–û

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: —Å 9 –¥–æ 5 —à–∞–≥–æ–≤

**–°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∏–∑–±—ã—Ç–æ—á–Ω–∞—è)**:
1. –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –Ω–∏—à–∞
2. Instagram
3. Facebook –∞–∫–∫–∞—É–Ω—Ç ‚ùå
4. –î–Ω–µ–≤–Ω–æ–π –±—é–¥–∂–µ—Ç ‚ùå
5. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è + —Å—Ç–æ–∏–º–æ—Å—Ç—å –ª–∏–¥–∞ ‚ùå
6. –ü–ª–∞–Ω –ø—Ä–æ–¥–∞–∂ + —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫ ‚ùå
7. –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤–æ—Ä–æ–Ω–∫–∏ ‚ùå
8. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
9. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)**:
1. ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –Ω–∏—à–∞
2. ‚úÖ –û–Ω–ª–∞–π–Ω-–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ (Instagram + —Å–∞–π—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. ‚úÖ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è + –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
4. ‚úÖ –£—Å–ª—É–≥–∏ + –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ + —Ü–µ–Ω–æ–≤–æ–π —Å–µ–≥–º–µ–Ω—Ç
5. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞

## –§–∏–ª–æ—Å–æ—Ñ–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤
- **Directions** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±—é–¥–∂–µ—Ç—ã, –º–µ—Ç—Ä–∏–∫–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞
- **Profile** —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ (Facebook, Instagram –∏ —Ç.–¥.)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** `user_briefing_responses`:
```sql
business_name              TEXT NOT NULL
business_niche             TEXT NOT NULL
instagram_url              TEXT
website_url                TEXT              ‚Üê –Ω–æ–≤–æ–µ
target_audience            TEXT              ‚Üê –Ω–æ–≤–æ–µ
geography                  TEXT              ‚Üê –Ω–æ–≤–æ–µ
main_services              TEXT              ‚Üê –Ω–æ–≤–æ–µ
competitive_advantages     TEXT              ‚Üê –Ω–æ–≤–æ–µ
price_segment              TEXT              ‚Üê –Ω–æ–≤–æ–µ
```

**–£–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è**:
- has_fb_account
- can_provide_fb_access
- daily_budget_usd
- directions (JSONB)
- conversion_lead_to_appointment
- conversion_appointment_to_sale
- additional_notes

### Backend (agent-service)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
1. `migrations/031_create_user_briefing_responses.sql` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
2. `src/lib/openaiPromptGenerator.ts` - —É–ø—Ä–æ—â–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BriefingData
3. `src/routes/briefingRoutes.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ 2 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è)

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** ‚úÖ –£—Å–ø–µ—à–Ω–æ
**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### Frontend

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `Step2OnlinePresence.tsx` - Instagram + —Å–∞–π—Ç —Å –∫–Ω–æ–ø–∫–æ–π "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"
- `Step3TargetAudience.tsx` - –¶–ê + –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
- `Step4ProductInfo.tsx` - —É—Å–ª—É–≥–∏ + –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ + —Ü–µ–Ω–æ–≤–æ–π —Å–µ–≥–º–µ–Ω—Ç

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ:**
- `OnboardingWizard.tsx` - TOTAL_STEPS = 5
- `Step5Completion.tsx` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –∏–∑ Step9)

**–£–¥–∞–ª–µ–Ω–Ω—ã–µ:**
- Step2Instagram.tsx
- Step3FacebookAccount.tsx
- Step4Budget.tsx
- Step5Directions.tsx
- Step6Economics.tsx
- Step7Conversion.tsx
- Step8Additional.tsx

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** ‚úÖ –£—Å–ø–µ—à–Ω–æ (2900 –º–æ–¥—É–ª–µ–π)
**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

## –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

```
‚úÖ agent-service    - –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ—Ä—Ç 8082)
‚úÖ frontend         - —Å–æ–±—Ä–∞–Ω –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
‚úÖ nginx            - –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
```

## –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Supabase SQL Editor —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
```
migrations/031_create_user_briefing_responses.sql
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å flow

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```sql
INSERT INTO user_accounts (username, password, access_token, ad_account_id, page_id, prompt1)
VALUES ('test_onboarding_v2', 'test123', 'test_token', 'act_123', '123456', NULL);
```

**–í–æ–π—Ç–∏ –∏ –ø—Ä–æ–π—Ç–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:**
- URL: https://app.performanteaiagency.com/login
- –õ–æ–≥–∏–Ω: test_onboarding_v2
- –ü–∞—Ä–æ–ª—å: test123

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```sql
-- 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±—Ä–∏—Ñ
SELECT * FROM user_briefing_responses WHERE user_id = (
  SELECT id FROM user_accounts WHERE username = 'test_onboarding_v2'
);

-- 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å prompt1
SELECT username, LENGTH(prompt1), LEFT(prompt1, 200) 
FROM user_accounts WHERE username = 'test_onboarding_v2';
```

## –£–ª—É—á—à–µ–Ω–∏—è UX

1. **–ë—ã—Å—Ç—Ä–µ–µ** - 44% –º–µ–Ω—å—à–µ —à–∞–≥–æ–≤ (5 –≤–º–µ—Å—Ç–æ 9)
2. **–ü–æ–Ω—è—Ç–Ω–µ–µ** - –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å —á–µ—Ç–∫–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. **–ì–∏–±—á–µ** - Instagram –∏ —Å–∞–π—Ç –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
4. **–õ–æ–≥–∏—á–Ω–µ–µ** - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏

## API Endpoints

### POST /api/briefing/generate-prompt

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
- user_id
- business_name
- business_niche

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- instagram_url
- website_url
- target_audience
- geography
- main_services
- competitive_advantages
- price_segment

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "prompt1": "## –ü—Ä–æ–º–ø—Ç –¥–ª—è AI-–ø–æ–º–æ—â–Ω–∏–∫–∞...",
  "message": "–ü—Ä–æ–º–ø—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω"
}
```

### GET /api/briefing/:user_id

–ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –±—Ä–∏—Ñ–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è prompt1

AI —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –ë–∞–∑–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ Performante (—Ñ–æ—Ä–º–∞—Ç—ã –∫—Ä–µ–∞—Ç–∏–≤–æ–≤, –±–æ–ª–µ–≤—ã–µ —Ç–æ—á–∫–∏)
- –ù–∏—à–∏ –∫–ª–∏–µ–Ω—Ç–∞
- –¶–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
- –¶–µ–Ω–æ–≤–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–µ–æ–≥—Ä–∞—Ñ–∏–∏ —Ä–∞–±–æ—Ç—ã

**–ú–æ–¥–µ–ª—å:** GPT-4o
**–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:** 0.3 (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)
**–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞:** 3000-4000 —Ç–æ–∫–µ–Ω–æ–≤

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìÑ **ONBOARDING_V2_SUMMARY.md** - –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
üìÑ **ONBOARDING_SIMPLIFIED.md** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
üìÑ **ONBOARDING_BRIEFING_TESTING.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## Checklist –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î —Å–æ–∑–¥–∞–Ω–∞
- [x] Backend –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [x] Frontend –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω—ã
- [x] –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
- [x] Health check –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (–≤—Ä—É—á–Ω—É—é)
- [ ] End-to-end —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 21 –Ω–æ—è–±—Ä—è 2025
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~3 —á–∞—Å–∞
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

üéâ **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ v2 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!**

