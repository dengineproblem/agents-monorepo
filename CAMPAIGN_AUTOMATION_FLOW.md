# ü§ñ –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø CAMPAIGN –†–ê–°–°–´–õ–û–ö - –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã](#–æ–±—â–∞—è-—Å—Ö–µ–º–∞-—Ä–∞–±–æ—Ç—ã)
2. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å–∏—Å—Ç–µ–º—ã)
3. [–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã](#–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π-—Ü–∏–∫–ª-—Ä–∞–±–æ—Ç—ã)
4. [–°–∏—Å—Ç–µ–º–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞ –ª–∏–¥–æ–≤](#—Å–∏—Å—Ç–µ–º–∞-—Å–∫–æ—Ä–∏–Ω–≥–∞-–ª–∏–¥–æ–≤)
5. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö-—Å–æ–æ–±—â–µ–Ω–∏–π)
6. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è-–æ—Ç–ø—Ä–∞–≤–∫–∞)
7. [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ —Å –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-–ø–µ—Ä–µ—Ö–æ–¥-—Å-–∫–ª—é—á–µ–≤—ã—Ö-—ç—Ç–∞–ø–æ–≤)
8. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-—Å–∏—Å—Ç–µ–º—ã)
9. [–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã](#–ø—Ä–∏–º–µ—Ä—ã-—Ä–∞–±–æ—Ç—ã)

---

## üéØ –û–ë–©–ê–Ø –°–•–ï–ú–ê –†–ê–ë–û–¢–´

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ï–ñ–ï–î–ù–ï–í–ù–´–ô –¶–ò–ö–õ                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

03:00 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤
        ‚Üì
        –ü–µ—Ä–µ–∞–Ω–∞–ª–∏–∑ –ª–∏–¥–æ–≤ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–∞—Ö (—á–µ—Ä–µ–∑ 3 –¥–Ω—è)
        AI —Ä–µ—à–∞–µ—Ç: –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –ª–∏ –ª–∏–¥–∞ –¥–∞–ª—å—à–µ

09:00 - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏
        ‚Üì
        1. –°–∫–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –ª–∏–¥–æ–≤ —Å autopilot_enabled=true
        2. –û—Ç–±–æ—Ä —Ç–æ–ø-N –ø–æ —Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–º—É –±–∞–ª–ª—É
        3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö AI-—Å–æ–æ–±—â–µ–Ω–∏–π
        4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ campaign_messages (status=pending)

10:00-20:00 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
        ‚Üì
        1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤ –∏ –¥–Ω–µ–π
        2. –†–∞—Å—á—ë—Ç —Å–ª–æ—Ç–∞ (—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å)
        3. –í—ã–±–æ—Ä–∫–∞ pending —Å–æ–æ–±—â–µ–Ω–∏–π
        4. –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Evolution API
        5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (sent/failed)
```

---

## üîß –ö–û–ú–ü–û–ù–ï–ù–¢–´ –°–ò–°–¢–ï–ú–´

### 1. **–¢–∞–±–ª–∏—Ü–∞: campaign_settings**

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------|-----|----------|--------------|
| `autopilot_enabled` | boolean | –í–∫–ª—é—á—ë–Ω –ª–∏ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç | false |
| `daily_message_limit` | integer | –õ–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å | 300 |
| `hot_interval_days` | integer | –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è HOT –ª–∏–¥–æ–≤ (–¥–Ω–µ–π) | 2 |
| `warm_interval_days` | integer | –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è WARM –ª–∏–¥–æ–≤ (–¥–Ω–µ–π) | 5 |
| `cold_interval_days` | integer | –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è COLD –ª–∏–¥–æ–≤ (–¥–Ω–µ–π) | 10 |
| `work_hours_start` | integer | –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (—á–∞—Å) | 10 |
| `work_hours_end` | integer | –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (—á–∞—Å) | 20 |
| `work_days` | array | –†–∞–±–æ—á–∏–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ (0-6) | [1,2,3,4,5] |
| `key_stage_cooldown_days` | integer | –ö—É–ª–¥–∞—É–Ω –ø–æ—Å–ª–µ –∫–ª—é—á–µ–≤–æ–≥–æ —ç—Ç–∞–ø–∞ | 7 |

### 2. **–¢–∞–±–ª–∏—Ü–∞: campaign_messages**

–û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `lead_id` | uuid | ID –ª–∏–¥–∞ |
| `user_account_id` | uuid | ID –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `message_text` | text | –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |
| `message_type` | enum | reminder / selling / useful |
| `strategy_type` | enum | check_in / value / case / offer / direct_selling |
| `context_id` | uuid | ID –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `status` | enum | **pending** / sent / failed |
| `scheduled_at` | timestamp | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è |
| `sent_at` | timestamp | –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ |

### 3. **–¢–∞–±–ª–∏—Ü–∞: dialog_analysis**

–õ–∏–¥—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `autopilot_enabled` | boolean | –í–∫–ª—é—á—ë–Ω –ª–∏ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç –¥–ª—è –ª–∏–¥–∞ |
| `funnel_stage` | string | –≠—Ç–∞–ø –≤–æ—Ä–æ–Ω–∫–∏ |
| `is_on_key_stage` | boolean | –ù–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –Ω–∞ –∫–ª—é—á–µ–≤–æ–º —ç—Ç–∞–ø–µ |
| `key_stage_entered_at` | timestamp | –ö–æ–≥–¥–∞ –ø–æ–ø–∞–ª –Ω–∞ –∫–ª—é—á–µ–≤–æ–π —ç—Ç–∞–ø |
| `key_stage_left_at` | timestamp | –ö–æ–≥–¥–∞ —É—à—ë–ª —Å –∫–ª—é—á–µ–≤–æ–≥–æ —ç—Ç–∞–ø–∞ |
| `last_campaign_message_at` | timestamp | –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏ |
| `campaign_messages_count` | integer | –°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ |
| `score` | integer | –ë–∞–∑–æ–≤—ã–π –±–∞–ª–ª –ª–∏–¥–∞ (0-100) |
| `reactivation_score` | float | –†–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –±–∞–ª–ª (—Ä–∞—Å—á—ë—Ç–Ω—ã–π) |

---

## ‚è∞ –ï–ñ–ï–î–ù–ï–í–ù–´–ô –¶–ò–ö–õ –†–ê–ë–û–¢–´

### üåô **03:00 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤**

**–ö—Ä–æ–Ω:** `keyStageTransitionCron.ts`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ª–∏–¥–æ–≤ —Å `is_on_key_stage = true`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ —Å `key_stage_entered_at`
3. –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ **‚â• 3 –¥–Ω–µ–π** ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑ –ª–∏–¥–∞
4. AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏ **—Å–∞–º —Ä–µ—à–∞–µ—Ç**:
   - –ü–µ—Ä–µ–≤–æ–¥–∏—Ç—å –ª–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
   - –û—Å—Ç–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–º
   - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ "deal_lost" –µ—Å–ª–∏ –æ—Ç–∫–∞–∑–∞–ª—Å—è

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ª–∏–¥–æ–≤ –ø–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –º–µ–Ω—è—Ç—å —ç—Ç–∞–ø—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–ø–∏—Å–∞–ª

**–ü—Ä–∏–º–µ—Ä:**
```
–î–µ–Ω—å 1: –õ–∏–¥ –∑–∞–ø–∏—Å–∞–ª—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
        ‚Üí funnel_stage = "consultation_booked"
        ‚Üí is_on_key_stage = true
        ‚Üí key_stage_entered_at = "2025-11-14"

–î–µ–Ω—å 4 (—á–µ—Ä–µ–∑ 3 –¥–Ω—è): –ö—Ä–æ–Ω –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç
        ‚Üí AI –≤–∏–¥–∏—Ç –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ: "–°–ø–∞—Å–∏–±–æ, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ –æ—Ç–ª–∏—á–Ω–æ"
        ‚Üí –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ "consultation_completed"
        ‚Üí is_on_key_stage = false
        ‚Üí key_stage_left_at = "2025-11-17"

–î–µ–Ω—å 11 (–µ—â—ë —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π): –õ–∏–¥ —Å–Ω–æ–≤–∞ –ø–æ–ø–∞–¥—ë—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏
```

---

### üåÖ **09:00 - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**

**–ö—Ä–æ–Ω:** `campaignCron.ts`

#### **–®–∞–≥ 1: –°–∫–æ—Ä–∏–Ω–≥ –ª–∏–¥–æ–≤**

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞ —Å `autopilot_enabled = true` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è **—Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –±–∞–ª–ª**:

```javascript
reactivationScore = baseScore √ó timeCoeff √ó activityCoeff √ó stageCoeff √ó fatigueCoeff
```

**–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã:**

| –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç | –î–∏–∞–ø–∞–∑–æ–Ω | –ß—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç |
|-------------|----------|---------------|
| `baseScore` | 0-100 | –ë–∞–∑–æ–≤—ã–π –±–∞–ª–ª –∏–∑ AI-–∞–Ω–∞–ª–∏–∑–∞ |
| `timeCoeff` | 0-1.5 | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø—Ä–æ—à–ª–æ) |
| `activityCoeff` | 0.1-1.2 | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –¥–∏–∞–ª–æ–≥–µ |
| `stageCoeff` | 0.8-1.3 | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —ç—Ç–∞–ø–∞ –≤–æ—Ä–æ–Ω–∫–∏ |
| `fatigueCoeff` | 0.5-1.0 | –£—Å—Ç–∞–ª–æ—Å—Ç—å –æ—Ç —Ä–∞—Å—Å—ã–ª–æ–∫ |

#### **–®–∞–≥ 2: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**

**–õ–∏–¥ –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å –µ—Å–ª–∏:**

1. ‚úÖ `is_on_key_stage = true` (–Ω–∞ –∫–ª—é—á–µ–≤–æ–º —ç—Ç–∞–ø–µ —Å–µ–π—á–∞—Å)
2. ‚úÖ –ú–µ–Ω–µ–µ 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ —É—à—ë–ª —Å –∫–ª—é—á–µ–≤–æ–≥–æ —ç—Ç–∞–ø–∞
3. ‚úÖ –≠—Ç–∞–ø `deal_closed` –∏–ª–∏ `deal_lost`
4. ‚úÖ –ù–µ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–∞—Å–∞–Ω–∏—è:
   - HOT: –º–µ–Ω–µ–µ 70% –æ—Ç 2 –¥–Ω–µ–π (< 1.4 –¥–Ω—è)
   - WARM: –º–µ–Ω–µ–µ 70% –æ—Ç 5 –¥–Ω–µ–π (< 3.5 –¥–Ω—è)
   - COLD: –º–µ–Ω–µ–µ 70% –æ—Ç 10 –¥–Ω–µ–π (< 7 –¥–Ω–µ–π)

#### **–®–∞–≥ 3: –û—Ç–±–æ—Ä —Ç–æ–ø-N**

- –í—Å–µ –ª–∏–¥—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ `reactivationScore` (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
- –ë–µ—Ä—É—Ç—Å—è **—Ç–æ–ø N** –ª–∏–¥–æ–≤, –≥–¥–µ N = `daily_message_limit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300)

#### **–®–∞–≥ 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞ –∏–∑ —Ç–æ–ø–∞:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤** - –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ:
   - –î–∞—Ç–µ (–≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ start_date / end_date)
   - –≠—Ç–∞–ø—É –≤–æ—Ä–æ–Ω–∫–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω target_funnel_stages)
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω target_interest_levels)

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** - AI –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è:
   - `check_in` - –º—è–≥–∫–æ–µ –∫–∞—Å–∞–Ω–∏–µ ("–∫–∞–∫ –¥–µ–ª–∞?")
   - `value` - –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
   - `case` - –∫–µ–π—Å –∫–ª–∏–µ–Ω—Ç–∞
   - `offer` - —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
   - `direct_selling` - –ø—Ä—è–º–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ

3. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞** - —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç:
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–¥–µ
   - –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π)
   - –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
   - –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
   - **–¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê** (–∫—Ä–∏—Ç–∏—á–Ω–æ!)

4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ GPT-4o-mini**:
   - Temperature: 0.8 (–≤—ã—Å–æ–∫–∞—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å)
   - Response format: JSON
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–∏–¥–∞

5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**:
   - –¢–∞–±–ª–∏—Ü–∞: `campaign_messages`
   - –°—Ç–∞—Ç—É—Å: `pending`
   - –í—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: strategy_type, context_id, goal_description

---

### ‚òÄÔ∏è **10:00-20:00 - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**

**–í–æ—Ä–∫–µ—Ä:** `campaignWorker.ts` (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

#### **–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:**

```
–ö–ê–ñ–î–´–ï 5 –ú–ò–ù–£–¢:

1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å autopilot_enabled = true

2. –î–õ–Ø –ö–ê–ñ–î–û–ì–û –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
   
   a) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è:
      - –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å –≤ work_days?
      - –¢–µ–∫—É—â–∏–π —á–∞—Å –≤ [work_hours_start, work_hours_end)?
      ‚Üí –ï—Å–ª–∏ –ù–ï–¢ ‚Üí –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   
   b) –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–ª–æ—Ç:
      messagesPerHour = daily_message_limit / (work_hours_end - work_hours_start)
      slotLimit = messagesPerHour / 12  // 12 —Å–ª–æ—Ç–æ–≤ –ø–æ 5 –º–∏–Ω—É—Ç –≤ —á–∞—Å–µ
   
   c) –í—ã–±—Ä–∞—Ç—å pending —Å–æ–æ–±—â–µ–Ω–∏—è:
      SELECT * FROM campaign_messages
      WHERE user_account_id = ?
        AND status = 'pending'
      ORDER BY created_at ASC
      LIMIT slotLimit
   
   d) –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
      - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –∏ instance –∏–∑ dialog_analysis
      - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ Evolution API
      - –°–ª—É—á–∞–π–Ω–∞—è –ø–∞—É–∑–∞ 1-3 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
      - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å (sent/failed)
      - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ª–∏–¥–∞
```

#### **–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞ —Å–ª–æ—Ç–∞:**

```
–ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- daily_message_limit = 300
- work_hours: 10:00 - 20:00 (10 —á–∞—Å–æ–≤)

–†–∞—Å—á—ë—Ç:
- messagesPerHour = 300 / 10 = 30 —Å–æ–æ–±—â–µ–Ω–∏–π/—á–∞—Å
- slotLimit = 30 / 12 = 2.5 ‚âà 3 —Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞ 5 –º–∏–Ω—É—Ç

–ò—Ç–æ–≥–æ: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ 3 —Å–æ–æ–±—â–µ–Ω–∏—è
–ó–∞ —á–∞—Å: 3 √ó 12 = 36 —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –¥–ª—è –∑–∞–ø–∞—Å–∞)
–ó–∞ –¥–µ–Ω—å: ~300 —Å–æ–æ–±—â–µ–Ω–∏–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ
```

---

## üìä –°–ò–°–¢–ï–ú–ê –°–ö–û–†–ò–ù–ì–ê –õ–ò–î–û–í

### **–§–æ—Ä–º—É–ª–∞ —Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –±–∞–ª–ª–∞:**

```javascript
reactivationScore = baseScore √ó timeCoeff √ó activityCoeff √ó stageCoeff √ó fatigueCoeff
```

### **1. Base Score (0-100)**

–ë–∞–∑–æ–≤—ã–π –±–∞–ª–ª –∏–∑ AI-–∞–Ω–∞–ª–∏–∑–∞ –¥–∏–∞–ª–æ–≥–∞:
- –ú–µ–¥–∏—Ü–∏–Ω–∞: +15
- –ò–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å: +10
- –í–ª–∞–¥–µ–ª–µ—Ü –±–∏–∑–Ω–µ—Å–∞: +10
- –£–∫–∞–∑–∞–ª –±—é–¥–∂–µ—Ç: +10
- –¢–∞—Ä–≥–µ—Ç–æ–ª–æ–≥/SMM: -30

### **2. Time Coefficient (0-1.5)**

**–£—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∫–∞—Å–∞–Ω–∏–µ** (–º–∏–Ω–∏–º—É–º –∏–∑ campaign –∏ –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π):

```javascript
interval = getTouchIntervalDays(lead, settings)  // 2/5/10 –¥–Ω–µ–π –ø–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ
daysSinceLastTouch = min(daysSinceLastCampaign, daysSinceLastMessage)

threshold = interval √ó 0.7  // 70% –ø–æ—Ä–æ–≥

if (daysSinceLastTouch < threshold) return 0  // –°–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ

if (daysSinceLastTouch < interval) {
  // –ú–µ–∂–¥—É 70% –∏ 100% –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
  progress = (daysSinceLastTouch / interval - 0.7) / 0.3
  return 0.5 + progress √ó 0.5  // 0.5 ‚Üí 1.0
}

// –ü–æ—Å–ª–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
return min(1.0 + (daysSinceLastTouch / interval - 1) √ó 0.4, 1.5)
```

**–ü—Ä–∏–º–µ—Ä:**
- HOT –ª–∏–¥, –∏–Ω—Ç–µ—Ä–≤–∞–ª 2 –¥–Ω—è
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥ ‚Üí timeCoeff = 0 (—Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ)
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 1.5 –¥–Ω—è –Ω–∞–∑–∞–¥ ‚Üí timeCoeff = 0.64 (–º–æ–∂–Ω–æ)
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 2 –¥–Ω—è –Ω–∞–∑–∞–¥ ‚Üí timeCoeff = 1.0 (–∏–¥–µ–∞–ª—å–Ω–æ)
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 4 –¥–Ω—è –Ω–∞–∑–∞–¥ ‚Üí timeCoeff = 1.4 (–¥–∞–≤–Ω–æ!)

### **3. Activity Coefficient (0.1-1.2)**

```javascript
coeff = 1.0

// –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö)
if (incomingRatio > 0.6) coeff += 0.3  // –ö–ª–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç
if (incomingRatio > 0.4) coeff += 0.1

// –î–ª–∏–Ω–∞ –¥–∏–∞–ª–æ–≥–∞
if (totalMessages > 20) coeff += 0.2
if (totalMessages > 10) coeff += 0.1

// –ù–µ–¥–∞–≤–Ω–æ—Å—Ç—å
if (daysSinceLastMessage < 7) coeff += 0.2   // –û—á–µ–Ω—å –Ω–µ–¥–∞–≤–Ω–æ
if (daysSinceLastMessage < 14) coeff += 0.1
if (daysSinceLastMessage > 90) coeff -= 0.2  // –û—á–µ–Ω—å –¥–∞–≤–Ω–æ

return clamp(coeff, 0.1, 1.2)
```

### **4. Stage Coefficient (0.8-1.3)**

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ —ç—Ç–∞–ø–∞–º –≤–æ—Ä–æ–Ω–∫–∏:

| –≠—Ç–∞–ø | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç | –ü–æ—á–µ–º—É |
|------|-------------|--------|
| `new_lead` | 1.2 | –ù–æ–≤—ã–µ –ª–∏–¥—ã –≤–∞–∂–Ω—ã |
| `first_contact` | 1.1 | –ù–µ–¥–∞–≤–Ω–æ –Ω–∞—á–∞–ª–∏ –æ–±—â–∞—Ç—å—Å—è |
| `no_show` | 1.3 | –ù–µ –ø—Ä–∏—à—ë–ª - –Ω—É–∂–Ω–æ —Å—Ä–æ—á–Ω–æ –≤–µ—Ä–Ω—É—Ç—å |
| `thinking` | 0.9 | –î—É–º–∞–µ—Ç - –Ω–µ —Ç–æ—Ä–æ–ø–∏–º |
| `price_objection` | 1.0 | –í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ –ø–æ —Ü–µ–Ω–µ |
| `not_qualified` | 0.8 | –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| –¥—Ä—É–≥–∏–µ | 1.0 | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |

### **5. Fatigue Coefficient (0.5-1.0)**

–®—Ç—Ä–∞—Ñ –∑–∞ —á–∞—Å—Ç—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏:

| –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç |
|---------------------|-------------|
| 0 | 1.0 |
| 1-3 | 0.95 |
| 4-6 | 0.85 |
| 7-10 | 0.7 |
| 11+ | 0.5 (—Å–∏–ª—å–Ω–æ –∑–∞—Å–ø–∞–º–ª–µ–Ω) |

---

## üí¨ –ì–ï–ù–ï–†–ê–¶–ò–Ø –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–• –°–û–û–ë–©–ï–ù–ò–ô

### **–ü—Ä–æ–º–ø—Ç –¥–ª—è AI (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):**

```
–¢—ã - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º.

–¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê: –°—Ä–µ–¥–∞, 17 –Ω–æ—è–±—Ä—è 2025

=== –ë–ò–ó–ù–ï–° –ö–û–ù–¢–ï–ö–°–¢ ===
[–°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –±–∏–∑–Ω–µ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞]
[–ò–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ª–∏–¥–∞]
[–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–æ—Ä–æ–Ω–∫–∏]

=== –ê–ö–¢–£–ê–õ–¨–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢ ===
[–ê–∫—Ç–∏–≤–Ω—ã–µ –∞–∫—Ü–∏–∏, –Ω–æ–≤–æ—Å—Ç–∏, —Å–æ–±—ã—Ç–∏—è]
[–ü–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –ª–∏–¥–∞ –ø–æ —ç—Ç–∞–ø—É/—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ]

=== –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –õ–ò–î–ï ===
–ò–º—è: –ò–≤–∞–Ω
–ë–∏–∑–Ω–µ—Å: –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
–≠—Ç–∞–ø: consultation_booked
–¢–µ–ø–ª–æ—Ç–∞: HOT
–ü—Ä–æ—à–ª–æ –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏: 5

–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏:
C: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∫–ª–∞–º—ã
A: –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –ø–æ–º–æ–≥—É...
C: –ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é?
A: –ö–æ–Ω–µ—á–Ω–æ! –ö–æ–≥–¥–∞ –≤–∞–º —É–¥–æ–±–Ω–æ?
C: –ó–∞–≤—Ç—Ä–∞ –≤ 15:00 –ø–æ–¥–æ–π–¥—ë—Ç
A: –ó–∞–ø–∏—Å–∞–ª –≤–∞—Å –Ω–∞ –∑–∞–≤—Ç—Ä–∞ 15:00

=== –°–¢–†–ê–¢–ï–ì–ò–Ø ===
–¢–∏–ø: check_in (–º—è–≥–∫–æ–µ –∫–∞—Å–∞–Ω–∏–µ)
–¶–µ–ª—å: –ù–∞–ø–æ–º–Ω–∏—Ç—å –æ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–¥—ë—Ç

=== –ü–†–ê–í–ò–õ–ê ===
1. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. 50-150 —Å–ª–æ–≤
3. –û–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ)
4. –ë–ï–ó —ç–º–æ–¥–∑–∏
5. –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—å –¥–∞—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏! –ï—Å–ª–∏ –æ–Ω–∞ –£–ñ–ï –ü–†–û–®–õ–ê - –Ω–µ –Ω–∞–ø–æ–º–∏–Ω–∞–π –æ –Ω–µ–π!
6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ä–∞–∑–±–∏–≤–∞–π –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ (~100 —Å–∏–º–≤–æ–ª–æ–≤), —Ä–∞–∑–¥–µ–ª—è–π –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π

–í–ï–†–ù–ò JSON:
{
  "message": "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
  "reasoning": "–ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–ª –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"
}
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç AI:**

```json
{
  "message": "–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –ò–≤–∞–Ω!\n\n–ù–∞–ø–æ–º–∏–Ω–∞—é, —á—Ç–æ –∑–∞–≤—Ç—Ä–∞ –≤ 15:00 —É –Ω–∞—Å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –≤–∞—à–µ–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏.\n\n–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –±—é–¥–∂–µ—Ç–µ –∏ —Ü–µ–ª—è—Ö - —Ç–∞–∫ –º—ã —Å–º–æ–∂–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –≤—Å—Ç—Ä–µ—á–∏.\n\n–ñ–¥—É –≤–∞—Å –∑–∞–≤—Ç—Ä–∞! –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å - –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å.",
  "reasoning": "–õ–∏–¥ –∑–∞–ø–∏—Å–∞–Ω –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é (HOT), –ø—Ä–æ—à–ª–æ 5 –¥–Ω–µ–π - —Å–∞–º–æ–µ –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–Ω–∏—Ç—å. –ò—Å–ø–æ–ª—å–∑—É—é check_in —Å—Ç—Ä–∞—Ç–µ–≥–∏—é: –º—è–≥–∫–æ –Ω–∞–ø–æ–º–∏–Ω–∞—é, –¥–∞—é –ø–æ–ª–µ–∑–Ω—ã–π —Å–æ–≤–µ—Ç (–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ), –æ—Å—Ç–∞–≤–ª—è—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω–∏—Ç—å. –û–±—Ä–∞—â–∞—é—Å—å –ø–æ –∏–º–µ–Ω–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏."
}
```

---

## üîÑ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ü–ï–†–ï–•–û–î –° –ö–õ–Æ–ß–ï–í–´–• –≠–¢–ê–ü–û–í

### **–ß—Ç–æ —Ç–∞–∫–æ–µ "–∫–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã"?**

–≠—Ç–æ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤ –≤–æ—Ä–æ–Ω–∫–µ, –≥–¥–µ –ª–∏–¥–∞ **–Ω–µ–ª—å–∑—è –±–µ—Å–ø–æ–∫–æ–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏**:
- –ó–∞–ø–∏—Å–∞–Ω –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
- –û–∂–∏–¥–∞–µ—Ç –≤—Å—Ç—Ä–µ—á—É
- –ù–∞ –≤–∏–∑–∏—Ç–µ
- –û–ø–ª–∞—Ç–∏–ª

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –í `business_profile.key_funnel_stages` –∫–ª–∏–µ–Ω—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–∏ –∫–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã.

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞:**

```
1. –õ–∏–¥ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª—é—á–µ–≤–æ–π —ç—Ç–∞–ø
   ‚Üí is_on_key_stage = true
   ‚Üí key_stage_entered_at = —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞
   ‚Üí –õ–∏–¥ –ò–°–ö–õ–Æ–ß–ê–ï–¢–°–Ø –∏–∑ —Ä–∞—Å—Å—ã–ª–æ–∫

2. –ß–µ—Ä–µ–∑ 3 –¥–Ω—è (03:00 –Ω–æ—á–∏)
   ‚Üí –ö—Ä–æ–Ω –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–∏–¥–∞
   ‚Üí AI —Å–º–æ—Ç—Ä–∏—Ç –≤—Å—é –ø–µ—Ä–µ–ø–∏—Å–∫—É
   ‚Üí AI —Ä–µ—à–∞–µ—Ç: –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∏–ª–∏ –Ω–µ—Ç

3. AI –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ª–∏–¥–∞ –¥–∞–ª—å—à–µ
   ‚Üí funnel_stage = "consultation_completed"
   ‚Üí is_on_key_stage = false
   ‚Üí key_stage_left_at = —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞

4. –ß–µ—Ä–µ–∑ 7 –¥–Ω–µ–π –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
   ‚Üí –õ–∏–¥ –°–ù–û–í–ê –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏
```

### **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:**

–°–∏—Å—Ç–µ–º–∞ **–ù–ï –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏—è–º** —ç—Ç–∞–ø–æ–≤:
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ custom funnel stages
- –ö–ª–∏–µ–Ω—Ç —Å–∞–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —ç—Ç–∞–ø—ã –∫–ª—é—á–µ–≤—ã–µ
- AI —Å–∞–º –ø–æ–Ω–∏–º–∞–µ—Ç –∏–∑ –ø–µ—Ä–µ–ø–∏—Å–∫–∏, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

### **–ü—Ä–∏–º–µ—Ä —Å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π:**

```
–î–µ–Ω—å 1 (14 –Ω–æ—è–±—Ä—è):
  –ö–ª–∏–µ–Ω—Ç: "–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é"
  –ú–µ–Ω–µ–¥–∂–µ—Ä: "–û—Ç–ª–∏—á–Ω–æ! –ó–∞–ø–∏—Å–∞–ª –≤–∞—Å –Ω–∞ 17 –Ω–æ—è–±—Ä—è –≤ 15:00"
  ‚Üí funnel_stage –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "consultation_booked"
  ‚Üí is_on_key_stage = true
  ‚Üí key_stage_entered_at = "2025-11-14"

–î–µ–Ω—å 2-3 (15-16 –Ω–æ—è–±—Ä—è):
  –†–∞—Å—Å—ã–ª–∫–∏ –ù–ï –ø–∏—à—É—Ç —ç—Ç–æ–º—É –ª–∏–¥—É (is_on_key_stage = true)

–î–µ–Ω—å 4 (17 –Ω–æ—è–±—Ä—è, 03:00):
  –ö—Ä–æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: –ø—Ä–æ—à–ª–æ 3 –¥–Ω—è
  ‚Üí –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑
  ‚Üí AI –≤–∏–¥–∏—Ç –¥–∞—Ç—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ "17 –Ω–æ—è–±—Ä—è"
  ‚Üí AI –≤–∏–¥–∏—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É "17 –Ω–æ—è–±—Ä—è"
  ‚Üí AI —Ä–µ—à–∞–µ—Ç: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å–µ–≥–æ–¥–Ω—è, –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å"

–î–µ–Ω—å 5 (18 –Ω–æ—è–±—Ä—è, 03:00):
  –ö—Ä–æ–Ω —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç (–ø—Ä–æ—à–ª–æ —É–∂–µ 4 –¥–Ω—è)
  ‚Üí AI –≤–∏–¥–∏—Ç: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –±—ã–ª–∞ –≤—á–µ—Ä–∞"
  ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∫—É –ø–æ—Å–ª–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏:
    - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–ª: "–°–ø–∞—Å–∏–±–æ, –±—ã–ª–æ –ø–æ–ª–µ–∑–Ω–æ" ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ "consultation_completed"
    - –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –º–æ–ª—á–∏—Ç ‚Üí –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç (–≤—Ä–µ–º—è –ø—Ä–æ—à–ª–æ)
  ‚Üí is_on_key_stage = false
  ‚Üí key_stage_left_at = "2025-11-18"

–î–µ–Ω—å 12 (25 –Ω–æ—è–±—Ä—è):
  –ü—Ä–æ—à–ª–æ 7 –¥–Ω–µ–π —Å key_stage_left_at
  ‚Üí –õ–∏–¥ –°–ù–û–í–ê –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ä–∞—Å—Å—ã–ª–∫–∞—Ö
```

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –°–ò–°–¢–ï–ú–´

### **–ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

**–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞: **–†–∞—Å—Å—ã–ª–∫–∏** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
- URL: `https://app.performanteaiagency.com/crm/` ‚Üí "–†–∞—Å—Å—ã–ª–∫–∏" –≤ –º–µ–Ω—é

**–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞: `campaign_settings`
- –ü–æ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫–∞–∂–¥–æ–≥–æ `user_account_id`

### **–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

#### 1. **–ê–≤—Ç–æ–ø–∏–ª–æ—Ç**
```
autopilot_enabled: boolean
```
–ì–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã. –ï—Å–ª–∏ `false` - –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

#### 2. **–î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç**
```
daily_message_limit: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300)
```
–ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ –±–æ–ª–µ–µ 300 –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ WhatsApp.

#### 3. **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ**
```
hot_interval_days: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)
warm_interval_days: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
cold_interval_days: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
```
–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ.

#### 4. **–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è**
```
work_hours_start: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)  // 10:00
work_hours_end: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)    // 20:00
work_days: array (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é [1,2,3,4,5])  // –ü–Ω-–ü—Ç
```
–í –∫–∞–∫–∏–µ —á–∞—Å—ã –∏ –¥–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

#### 5. **–ö—É–ª–¥–∞—É–Ω –ø–æ—Å–ª–µ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤**
```
key_stage_cooldown_days: integer (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)
```
–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–µ –ø–∏—Å–∞—Ç—å –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ —Å –∫–ª—é—á–µ–≤–æ–≥–æ —ç—Ç–∞–ø–∞.

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ª–∏–¥–∞:**

–í —Ç–∞–±–ª–∏—Ü–µ `dialog_analysis` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞:
```
autopilot_enabled: boolean
```
–ú–æ–∂–Ω–æ **–æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø–∏–ª–æ—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–∏–¥–∞**, –¥–∞–∂–µ –µ—Å–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –æ–Ω –≤–∫–ª—é—á—ë–Ω.

---

## üìñ –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´

### **–ü—Ä–∏–º–µ—Ä 1: –•–æ–ª–æ–¥–Ω—ã–π –ª–∏–¥ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è**

```
–ò–°–•–û–î–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
- –õ–∏–¥: "–í–∏–∫—Ç–æ—Ä", —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è
- interest_level: cold
- score: 35
- last_campaign_message_at: 12 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
- campaign_messages_count: 2
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞: cold_interval_days = 10

–†–ê–°–ß–Å–¢:
baseScore = 35
timeCoeff = 1.08 (–ø—Ä–æ—à–ª–æ 12 –¥–Ω–µ–π –ø—Ä–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ 10)
activityCoeff = 0.95 (—Å—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
stageCoeff = 1.0 (–æ–±—ã—á–Ω—ã–π —ç—Ç–∞–ø)
fatigueCoeff = 0.95 (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–≥–æ 2 —Å–æ–æ–±—â–µ–Ω–∏—è)

reactivationScore = 35 √ó 1.08 √ó 0.95 √ó 1.0 √ó 0.95 = 34.1

–†–ï–ó–£–õ–¨–¢–ê–¢:
‚úÖ –ü–æ–ø–∞–¥–∞–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å (–µ—Å–ª–∏ –≤ —Ç–æ–ø-300 –ø–æ –±–∞–ª–ª—É)
‚úÖ AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
```

### **–ü—Ä–∏–º–µ—Ä 2: –ì–æ—Ä—è—á–∏–π –ª–∏–¥ –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏**

```
–ò–°–•–û–î–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
- –õ–∏–¥: "–ú–∞—Ä–∏–Ω–∞", —Å–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã
- interest_level: hot
- funnel_stage: "consultation_booked"
- is_on_key_stage: true
- key_stage_entered_at: "2025-11-14"

14 –ù–û–Ø–ë–†–Ø (–¥–µ–Ω—å –∑–∞–ø–∏—Å–∏):
‚úÖ is_on_key_stage = true
‚Üí –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏ (–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

15-16 –ù–û–Ø–ë–†–Ø:
‚úÖ –í—Å—ë –µ—â—ë is_on_key_stage = true
‚Üí –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏

17 –ù–û–Ø–ë–†–Ø (03:00):
‚úÖ –ü—Ä–æ—à–ª–æ 3 –¥–Ω—è
‚úÖ –ö—Ä–æ–Ω –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç
‚úÖ AI –≤–∏–¥–∏—Ç –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –±—ã–ª–∞ –æ—Ç–ª–∏—á–Ω–æ–π, –¥—É–º–∞—é —Ä–∞–±–æ—Ç–∞—Ç—å"
‚úÖ AI –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ "consultation_completed"
‚úÖ is_on_key_stage = false
‚úÖ key_stage_left_at = "2025-11-17"

18-23 –ù–û–Ø–ë–†–Ø:
‚ö†Ô∏è –ü—Ä–æ—à–ª–æ < 7 –¥–Ω–µ–π —Å key_stage_left_at
‚Üí –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏ (–∫—É–ª–¥–∞—É–Ω)

24 –ù–û–Ø–ë–†–Ø –∏ –¥–∞–ª–µ–µ:
‚úÖ –ü—Ä–æ—à–ª–æ 7 –¥–Ω–µ–π
‚úÖ –°–ù–û–í–ê –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞—Å—Å—ã–ª–∫–∏
```

### **–ü—Ä–∏–º–µ—Ä 3: –ó–∞—Å–ø–∞–º–ª–µ–Ω–Ω—ã–π –ª–∏–¥**

```
–ò–°–•–û–î–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
- –õ–∏–¥: "–î–º–∏—Ç—Ä–∏–π", –∏–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å
- interest_level: warm
- score: 45
- campaign_messages_count: 12 (–æ—á–µ–Ω—å –º–Ω–æ–≥–æ!)
- last_campaign_message_at: 6 –¥–Ω–µ–π –Ω–∞–∑–∞–¥
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞: warm_interval_days = 5

–†–ê–°–ß–Å–¢:
baseScore = 45
timeCoeff = 1.08 (–ø—Ä–æ—à–ª–æ 6 –¥–Ω–µ–π –ø—Ä–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ 5)
activityCoeff = 0.9
stageCoeff = 1.0
fatigueCoeff = 0.5 (–°–ò–õ–¨–ù–´–ô —à—Ç—Ä–∞—Ñ –∑–∞ 12 —Å–æ–æ–±—â–µ–Ω–∏–π!)

reactivationScore = 45 √ó 1.08 √ó 0.9 √ó 1.0 √ó 0.5 = 21.9

–†–ï–ó–£–õ–¨–¢–ê–¢:
‚ö†Ô∏è –ë–∞–ª–ª —Å–∏–ª—å–Ω–æ —É–ø–∞–ª –∏–∑-–∑–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
‚ö†Ô∏è –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ù–ï –ø–æ–ø–∞–¥—ë—Ç –≤ —Ç–æ–ø-300
‚Üí –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞—Å–ø–∞–º–ª–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤
```

---

## üéõÔ∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### **–§–∞–π–ª—ã:**

```
services/chatbot-service/src/
‚îú‚îÄ‚îÄ cron/
‚îÇ   ‚îú‚îÄ‚îÄ campaignCron.ts              # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ (09:00)
‚îÇ   ‚îî‚îÄ‚îÄ keyStageTransitionCron.ts    # –ü–µ—Ä–µ—Ö–æ–¥ —Å –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤ (03:00)
‚îú‚îÄ‚îÄ workers/
‚îÇ   ‚îî‚îÄ‚îÄ campaignWorker.ts            # –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ campaignScoringAgent.ts      # –°–∫–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–±–æ—Ä –ª–∏–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ messageGenerator.ts          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI-—Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ promptBuilder.ts             # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ strategySelector.ts          # –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ contextManager.ts            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
‚îî‚îÄ‚îÄ server.ts                        # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫—Ä–æ–Ω–æ–≤ –∏ –≤–æ—Ä–∫–µ—Ä–æ–≤
```

### **–ó–∞–ø—É—Å–∫ –∫—Ä–æ–Ω–æ–≤:**

```typescript
// services/chatbot-service/src/server.ts

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–∏ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 9:00)
startCampaignCron();

// –ü–µ—Ä–µ—Ö–æ–¥ —Å –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
startKeyStageTransitionCron();

// –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
startCampaignWorker();
```

### **–õ–æ–≥–∏:**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Pino:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker logs agents-monorepo-chatbot-service-1 --tail 100

# –ù–∞–π—Ç–∏ –ª–æ–≥–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏
docker logs agents-monorepo-chatbot-service-1 | grep "campaign queue generation"

# –ù–∞–π—Ç–∏ –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
docker logs agents-monorepo-chatbot-service-1 | grep "Campaign worker"

# –ù–∞–π—Ç–∏ –ª–æ–≥–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
docker logs agents-monorepo-chatbot-service-1 | grep "Key stage transition"
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –†–ê–ë–û–¢–´

### **–£—Ç—Ä–æ–º (–ø–æ—Å–ª–µ 09:00):**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
```bash
docker logs agents-monorepo-chatbot-service-1 | grep "Daily campaign queue generation completed"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
successCount: X, totalQueued: Y
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î:
```sql
SELECT COUNT(*) 
FROM campaign_messages 
WHERE status = 'pending' 
AND created_at::date = CURRENT_DATE;
```

### **–í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è (10:00-20:00):**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏:
```bash
docker logs agents-monorepo-chatbot-service-1 | grep "Sending message batch"
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏–π:
```sql
SELECT status, COUNT(*) 
FROM campaign_messages 
WHERE scheduled_at::date = CURRENT_DATE
GROUP BY status;
```

–û–∂–∏–¥–∞–µ—Ç—Å—è:
- `pending`: —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
- `sent`: —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è
- `failed`: –º–∏–Ω–∏–º—É–º (–≤ –∏–¥–µ–∞–ª–µ 0)

### **–ù–æ—á—å—é (–ø–æ—Å–ª–µ 03:00):**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã:
```bash
docker logs agents-monorepo-chatbot-service-1 | grep "Key stage transition check completed"
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–¥–æ–≤ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–∞—Ö:
```sql
SELECT funnel_stage, COUNT(*) 
FROM dialog_analysis 
WHERE is_on_key_stage = true
GROUP BY funnel_stage;
```

---

## üö® –ß–ê–°–¢–´–ï –ü–†–û–ë–õ–ï–ú–´

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. `autopilot_enabled = true` –≤ `campaign_settings`
2. –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–∞—Ö
3. –ï—Å—Ç—å –ª–∏ pending —Å–æ–æ–±—â–µ–Ω–∏—è
4. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ campaignWorker

```bash
docker logs agents-monorepo-chatbot-service-1 | grep "Campaign worker started"
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–∞–ª–æ –ª–∏–¥–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ª–∏–¥–æ–≤ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–∞—Ö
2. –ù–µ–¥–∞–≤–Ω–æ –±—ã–ª–∏ –∫–∞—Å–∞–Ω–∏—è (–Ω–µ –ø—Ä–æ—à—ë–ª –∏–Ω—Ç–µ—Ä–≤–∞–ª)
3. –ù–∏–∑–∫–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–∞–ª–ª—ã
4. –ú–∞–ª–æ –ª–∏–¥–æ–≤ —Å `autopilot_enabled = true`

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (—Å–µ–π—á–∞—Å 70%)
- –£–º–µ–Ω—å—à–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã (hot/warm/cold_interval_days)
- –í–∫–ª—é—á–∏—Ç—å autopilot –¥–ª—è –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –ª–∏–¥–æ–≤

### **–ü—Ä–æ–±–ª–µ–º–∞: –õ–∏–¥—ã –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç —Å –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤**

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `keyStageTransitionCron`
2. –ü—Ä–æ—à–ª–æ –ª–∏ 3 –¥–Ω—è —Å `key_stage_entered_at`
3. –ï—Å—Ç—å –ª–∏ endpoint –¥–ª—è –ø–µ—Ä–µ–∞–Ω–∞–ª–∏–∑–∞

```bash
docker logs agents-monorepo-chatbot-service-1 | grep "Reanalyzing lead on key stage"
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –î–õ–Ø –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø

### **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ:**
- –°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ
- –°–∫–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –±–∞–ª–ª

### **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ:**
- –°–∫–æ–ª—å–∫–æ –ª–∏–¥–æ–≤ –ø–µ—Ä–µ—à–ª–æ —Å –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤
- Conversion rate (–æ—Ç–≤–µ—Ç–∏–ª–∏ / –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∏–¥–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –£—Å—Ç–∞–ª–æ—Å—Ç—å –ª–∏–¥–æ–≤ (—Å—Ä–µ–¥–Ω–∏–π campaign_messages_count)

### **–ú–µ—Å—è—á–Ω—ã–µ:**
- –û–±—â–∏–π –æ—Ö–≤–∞—Ç (—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª–∏–¥–æ–≤ –≤ —Ä–∞—Å—Å—ã–ª–∫–∞—Ö)
- ROI –∫–∞–º–ø–∞–Ω–∏–π (—Å–¥–µ–ª–∫–∏ / –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã (A/B —Ç–µ—Å—Ç—ã)

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

1. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å:**
   - –ï—Å–ª–∏ —É –º–Ω–æ–≥–∏—Ö –ª–∏–¥–æ–≤ `campaign_messages_count > 10` - —Å–Ω–∏–∑–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É

2. **A/B —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:**
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è hot/warm/cold_interval_days
   - –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–≤–µ—Ç–æ–≤

3. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã:**
   - –ö–∞–∫–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –¥–∞—é—Ç –ª—É—á—à–∏–π –æ—Ç–∫–ª–∏–∫
   - –û—Ç–∫–ª—é—á–∞–π—Ç–µ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ

4. **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã:**
   - –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–π—Ç–µ –ª–∏–¥–æ–≤ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

5. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç:**
   - –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –±–æ–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –ù–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–æ—Ä–æ–Ω–∫–µ

---

## üìû –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

**–î–æ–∫—É–º–µ–Ω—Ç—ã:**
- `CAMPAIGN_ANALYTICS.md` - **–ù–û–í–û–ï!** –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ä–∞—Å—Å—ã–ª–æ–∫ (–æ—Ç–≤–µ—Ç—ã, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏, –¥–∏–Ω–∞–º–∏–∫–∞)
- `CAMPAIGN_QUEUE_IMPROVEMENTS_SUMMARY.md` - –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∫–æ—Ä–∏–Ω–≥–∞
- `STRATEGY_SYSTEM.md` - —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π
- `INFRASTRUCTURE.md` - –æ–±—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–¢–∞–±–ª–∏—Ü—ã –≤ –ë–î:**
- `campaign_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞
- `campaign_messages` - –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (+ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è)
- `campaign_templates` - —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `campaign_contexts` - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
- `lead_daily_snapshot` - **–ù–û–í–û–ï!** –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∏–¥–æ–≤
- `dialog_analysis` - –ª–∏–¥—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- `business_profile` - –ø—Ä–æ—Ñ–∏–ª—å –±–∏–∑–Ω–µ—Å–∞ –∏ –∫–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã

**API Endpoints:**
- `GET /campaign/settings/:userId` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `PUT /campaign/settings/:userId` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `POST /campaign/generate-queue` - –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- `GET /campaign/queue/today` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—á–µ—Ä–µ–¥—å –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `GET /campaign/analytics/overview` - **–ù–û–í–û–ï!** –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /campaign/analytics/by-strategy` - **–ù–û–í–û–ï!** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º
- `GET /campaign/analytics/by-temperature` - **–ù–û–í–û–ï!** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ
- `GET /campaign/analytics/temperature-dynamics` - **–ù–û–í–û–ï!** –î–∏–Ω–∞–º–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- `GET /campaign/analytics/by-stage` - **–ù–û–í–û–ï!** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —ç—Ç–∞–ø–∞–º

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production

üöÄ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è work = Happy users!**

