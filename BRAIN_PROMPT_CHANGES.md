# üß† –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ Agent Brain

## –î–∞—Ç–∞: 05.10.2025

### –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ–º–ø—Ç

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ `CreateCampaignWithCreative`

**–ë—ã–ª–æ:**
```
CreateCampaignWithCreative {
  "user_creative_id",
  "objective",
  "campaign_name",
  "daily_budget_cents",
  "targeting?"  // –ù—É–∂–Ω–æ –±—ã–ª–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
}
–ö–∞–º–ø–∞–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –ü–ê–£–ó–ï
```

**–°—Ç–∞–ª–æ:**
```
CreateCampaignWithCreative {
  "user_creative_id",
  "objective",
  "campaign_name",
  "daily_budget_cents",
  "use_default_settings?",  // ‚úÖ –ù–û–í–û–ï
  "auto_activate?"           // ‚úÖ –ù–û–í–û–ï
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **`use_default_settings=true` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ì–æ—Ä–æ–¥–∞, –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª –±–µ—Ä—É—Ç—Å—è –∏–∑ `default_ad_settings`
   - **–ù–ï —É–∫–∞–∑—ã–≤–∞–π `targeting` –≤—Ä—É—á–Ω—É—é!**

2. **`auto_activate`**
   - `true` - —Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∫–∞–º–ø–∞–Ω–∏—é (–Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–∫–∞–∑—ã)
   - `false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - —Å–æ–∑–¥–∞–µ—Ç –Ω–∞ –ü–ê–£–ó–ï

3. **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã**
   - –ü—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è **–°–†–ê–ó–£**
   - –†–∞–±–æ—Ç–∞–µ—Ç **–ë–ï–°–°–†–û–ß–ù–û** (daily_budget)

#### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–æ–≤—ã–º –∫—Ä–µ–∞—Ç–∏–≤–∞–º

**–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç 6 –≤ "–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ SCORING DATA":**

> **–ù–û–í–´–ï –ö–†–ï–ê–¢–ò–í–´ –£–¢–†–û–ú**: –µ—Å–ª–∏ –≤ active_creatives_ready –µ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤ —Å –¥–∞—Ç–æ–π —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞ –∏ score <20 ‚Äî —Å–æ–∑–¥–∞–π –∫–∞–º–ø–∞–Ω–∏—é —á–µ—Ä–µ–∑ CreateCampaignWithCreative —Å auto_activate=true. –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ default_ad_settings –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ê–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `active_creatives_ready` –æ—Ç Scoring Agent
- –ï—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç **—Å–≤–µ–∂–∏–π** –∫—Ä–µ–∞—Ç–∏–≤ (created_at = —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞)
- –ò —É –Ω–µ–≥–æ **—Ö–æ—Ä–æ—à–∏–π —Å–∫–æ—Ä–∏–Ω–≥** (Low risk, score <20)
- –ê–≥–µ–Ω—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç** –∫–∞–º–ø–∞–Ω–∏—é —É—Ç—Ä–æ–º

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω –ø—É–Ω–∫—Ç 3 "–ê–∫—Ç–∏–≤–Ω—ã–µ –∫—Ä–µ–∞—Ç–∏–≤—ã"

**–ë—ã–ª–æ:**
> Scoring agent –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –∫–∞–∫–∏–µ –∫—Ä–µ–∞—Ç–∏–≤—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –†–µ–∫–æ–º–µ–Ω–¥—É–π –∏—Ö –≤ planNote/reportText.

**–°—Ç–∞–ª–æ:**
> –ï—Å–ª–∏ –ø–æ—è–≤–∏–ª—Å—è –ù–û–í–´–ô –∫—Ä–µ–∞—Ç–∏–≤ (created_at —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞) —Å Low risk (score <20) ‚Äî —ç—Ç–æ —Å–∏–≥–Ω–∞–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ —É—Ç—Ä–æ–º —á–µ—Ä–µ–∑ CreateCampaignWithCreative —Å auto_activate=true.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–º

### –ü—Ä–∏–º–µ—Ä 1: –£—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–∞

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Scoring Agent:**
```json
{
  "scoring": {
    "active_creatives_ready": [
      {
        "id": "uuid-–∫—Ä–µ–∞—Ç–∏–≤–∞",
        "title": "–ù–æ–≤–æ–µ –ø—Ä–æ–º–æ –≤–∏–¥–µ–æ",
        "created_at": "2025-10-05T06:30:00Z",
        "risk_level": "Low",
        "score": 12,
        "fb_creative_id_whatsapp": "123456789"
      }
    ]
  }
}
```

**–î–µ–π—Å—Ç–≤–∏–µ –∞–≥–µ–Ω—Ç–∞:**
```json
{
  "actions": [
    {
      "type": "CreateCampaignWithCreative",
      "params": {
        "user_creative_id": "uuid-–∫—Ä–µ–∞—Ç–∏–≤–∞",
        "objective": "WhatsApp",
        "campaign_name": "–ü—Ä–æ–º–æ –≤–∏–¥–µ–æ - 05.10.2025",
        "daily_budget_cents": 50000,
        "auto_activate": true
      }
    }
  ],
  "planNote": "–û–±–Ω–∞—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π –∫—Ä–µ–∞—Ç–∏–≤ (score=12, Low risk). –°–æ–∑–¥–∞—é –∫–∞–º–ø–∞–Ω–∏—é —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞ –∏ –∑–∞–ø—É—Å–∫–∞—é —Å—Ä–∞–∑—É.",
  "reportText": "..."
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ö–∞–º–ø–∞–Ω–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –∫—Ä–µ–∞—Ç–∏–≤–æ–º –∏–∑ –±–∞–∑—ã
2. –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏–∑ `default_ad_settings`:
   - –ì–æ—Ä–æ–¥–∞: –ê–ª–º–∞—Ç—ã, –ê—Å—Ç–∞–Ω–∞ (–ø—Ä–∏–º–µ—Ä)
   - –í–æ–∑—Ä–∞—Å—Ç: 25-45
   - –ü–æ–ª: –≤—Å–µ
3. –ö–∞–º–ø–∞–Ω–∏—è **—Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è** (auto_activate=true)
4. –ü–µ—Ä–≤—ã–µ –ø–æ–∫–∞–∑—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 5-10 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞ –ø–∞—É–∑—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_id": "uuid",
    "objective": "Instagram",
    "campaign_name": "–¢–µ—Å—Ç–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è",
    "daily_budget_cents": 30000,
    "auto_activate": false  // –°–æ–∑–¥–∞–µ–º –Ω–∞ –ø–∞—É–∑–µ
  }
}
```

**–ê–≥–µ–Ω—Ç –¥—É–º–∞–µ—Ç:**
> "–ö—Ä–µ–∞—Ç–∏–≤ –Ω–æ–≤—ã–π –Ω–æ —Å Medium risk (score=35). –°–æ–∑–¥–∞—é –∫–∞–º–ø–∞–Ω–∏—é –Ω–∞ –ü–ê–£–ó–ï, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º."

### –ü—Ä–∏–º–µ—Ä 3: –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞ (—Ä–µ–¥–∫–æ)

```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_id": "uuid",
    "objective": "WhatsApp",
    "campaign_name": "–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è",
    "daily_budget_cents": 100000,
    "use_default_settings": false,  // –û—Ç–∫–ª—é—á–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ
    "targeting": {  // –°–≤–æ–π —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥
      "age_min": 30,
      "age_max": 50,
      "genders": [2],
      "geo_locations": {
        "cities": [{"key": "2643743"}]
      }
    }
  }
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥
- –û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –î–ª—è A/B —Ç–µ—Å—Ç–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### ‚úÖ –î–ª—è –∞–≥–µ–Ω—Ç–∞:
- –ù–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–µ - –æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ú–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è
- –ü—Ä–æ—â–µ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥ –≤–æ –≤—Å–µ—Ö –∫–∞–º–ø–∞–Ω–∏—è—Ö
- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –Ω–æ–≤—ã—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ —É—Ç—Ä–æ–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (`default_ad_settings`)

### ‚úÖ –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ü—Ä–æ—â–µ A/B —Ç–µ—Å—Ç—ã –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã

## –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
- Health Score —Ä–∞—Å—á–µ—Ç
- –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–±–∞–ª–∞–Ω—Å–∞ –±—é–¥–∂–µ—Ç–∞
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–∞—É–∑—ã/–∞–∫—Ç–∏–≤–∞—Ü–∏–∏

### –î—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
- UpdateAdSetDailyBudget
- PauseCampaign
- PauseAd
- Workflow.Duplicate*
- Audience.Duplicate*

–í—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ!

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π

–°—Ç–∞—Ä—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ **–ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã**. –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫:
- –ù–æ–≤—ã–º –∫–∞–º–ø–∞–Ω–∏—è–º —á–µ—Ä–µ–∑ `CreateCampaignWithCreative`
- –° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞)

## Rollback

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é:
1. –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `services/agent-brain/src/server.js`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å agent-brain
3. –°—Ç–∞—Ä—ã–π –ø—Ä–æ–º–ø—Ç –∏–∑ git history

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. ‚úÖ –ê–≥–µ–Ω—Ç –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π –∫—Ä–µ–∞—Ç–∏–≤ –≤ scoring
2. ‚úÖ –ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –∫–∞–º–ø–∞–Ω–∏—é —Å `auto_activate=true`
3. ‚úÖ –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏–∑ `default_ad_settings`
4. ‚úÖ –ö–∞–º–ø–∞–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–∫–∞–∑—ã —Å—Ä–∞–∑—É
5. ‚úÖ –õ–æ–≥–∏ –∞–≥–µ–Ω—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ

### –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
```bash
# 1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫—Ä–µ–∞—Ç–∏–≤ –≤ user_creatives
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å agent-brain
# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å actions –≤ –ª–æ–≥–∞—Ö
# 4. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–∞–º–ø–∞–Ω–∏—è —Å–æ–∑–¥–∞–ª–∞—Å—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–æ–º
```

---

**–í–µ—Ä—Å–∏—è –ø—Ä–æ–º–ø—Ç–∞:** 2.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 05.10.2025  
**–ê–≤—Ç–æ—Ä:** Agent Brain Team
