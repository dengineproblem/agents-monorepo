services:
  agent-brain:
    build: ./services/agent-brain
    env_file:
      - ./.env.brain
    environment:
      - BRAIN_DRY_RUN=false
      - BRAIN_MAX_ACTIONS_PER_RUN=100
      - BRAIN_DEBUG_LLM=true
      - BRAIN_MODEL=gpt-5
      - BRAIN_TEST_MODE=false
      - AGENT_SERVICE_URL=http://agent-service:8082
      - CRON_ENABLED=false
      - CRON_SCHEDULE=0 8 * * *
    ports:
      - "7080:7080"
    restart: unless-stopped

  creative-analyzer:
    build: ./services/agent-brain
    env_file:
      - ./.env.brain
    environment:
      - ANALYZER_PORT=7081
    command: node src/analyzerService.js
    ports:
      - "7081:7081"
    restart: unless-stopped

  agent-service:
    build: ./services/agent-service
    env_file:
      - ./.env.agent
    environment:
      - AGENT_DRY_RUN=false
      - FB_VALIDATE_ONLY=false
      - CAMPAIGN_BUILDER_MODEL=gpt-4o
      - ANALYZER_URL=http://creative-analyzer:7081
    ports:
      - "8080:8082"
    restart: unless-stopped
