# –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π - –ó–ê–í–ï–†–®–ï–ù–û ‚úÖ

**–î–∞—Ç–∞:** 2024-11-14  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–£—Å–ø–µ—à–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è WhatsApp —Ä–∞—Å—Å—ã–ª–æ–∫, –≤–∫–ª—é—á–∞—é—â–∞—è:

### 1. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ú–∏–≥—Ä–∞—Ü–∏—è 007)

**–§–∞–π–ª:** `services/crm-backend/migrations/007_add_strategy_system.sql`

**–°–æ–∑–¥–∞–Ω–æ:**
- –¢–∞–±–ª–∏—Ü–∞ `campaign_contexts` - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (–∞–∫—Ü–∏–∏, –∫–µ–π—Å—ã, –Ω–æ–≤–æ—Å—Ç–∏)
- –¢–∞–±–ª–∏—Ü–∞ `campaign_strategy_overrides` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–∞—Ç—Ä–∏—Ü—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –†–∞—Å—à–∏—Ä–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã `campaign_messages` –∏ `campaign_templates` –ø–æ–ª—è–º–∏:
  - `strategy_type` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
  - `context_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
  - `goal_description` - —Ü–µ–ª—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### 2. ‚úÖ Backend Logic (Chatbot Service)

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:**

```
services/chatbot-service/src/lib/
‚îú‚îÄ‚îÄ strategyTypes.ts              # TypeScript —Ç–∏–ø—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ defaultStrategyMatrix.ts      # –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
‚îú‚îÄ‚îÄ strategySelector.ts           # –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚îú‚îÄ‚îÄ contextManager.ts             # –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
‚îú‚îÄ‚îÄ messageExamples.ts            # –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îî‚îÄ‚îÄ promptBuilder.ts              # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏:**
- `messageGenerator.ts` - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- `campaignCron.ts` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ strategy_type –∏ context_id

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤: `check_in`, `value`, `case`, `offer`, `direct_selling`
- –£–º–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –ø–æ `funnel_stage` √ó `interest_level`
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–æ–ª–µ–µ 2 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
- Boost —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –≤ –ø—Ä–æ–º–ø—Ç–µ

### 3. ‚úÖ API (CRM Backend)

**–§–∞–π–ª:** `services/crm-backend/src/routes/campaignContexts.ts`

**–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /contexts` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
- `GET /contexts/active` - –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `POST /contexts` - —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `PUT /contexts/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `DELETE /contexts/:id` - —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `GET /contexts/:id` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ ID

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `server.ts`

### 4. ‚úÖ Frontend (CRM Frontend)

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

```
services/crm-frontend/src/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ campaignContextsApi.ts     # API –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
‚îî‚îÄ‚îÄ components/campaigns/
    ‚îî‚îÄ‚îÄ CampaignContextsManager.tsx # UI —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
```

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `ReactivationCampaigns.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç"
- `TemplateManager.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `strategy_type` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `DailyCampaignQueue.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `strategy_type` –≤ –≤–∏–¥–µ badge —Å –∏–∫–æ–Ω–∫–∞–º–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª UI:**
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–ª–µ–≤—ã–º —ç—Ç–∞–ø–∞–º –≤–æ—Ä–æ–Ω–∫–∏ –∏ —Ç–µ–ø–ª–æ—Ç–µ –ª–∏–¥–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ (1-5)
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
- –°—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤

### 5. ‚úÖ –¢–µ—Å—Ç—ã

**–§–∞–π–ª:** `services/chatbot-service/src/lib/__tests__/strategySelector.test.ts`

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- –¢–µ—Å—Ç—ã –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã
- –¢–µ—Å—Ç—ã boost —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –¢–µ—Å—Ç—ã –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è –º–∞—Ç—Ä–∏—Ü—ã (–≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ stage √ó interest)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### 6. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–§–∞–π–ª—ã:**
- `STRATEGY_SYSTEM.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã (30+ —Å—Ç—Ä–∞–Ω–∏—Ü)
  - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤
  - –ü–æ–ª–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
  - API –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - Best Practices
  - –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞

---

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä)

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:

1. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏** (Cron, 09:00)
   - –°–∫–æ—Ä–∏–Ω–≥ –ª–∏–¥–æ–≤ —Å autopilot
   - –í—ã–±–æ—Ä —Ç–æ–ø N –ø–æ reactivationScore

2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
   - –í—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã –ø–æ stage √ó interest
   - Boost –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å AI** (GPT-4o-mini)
   - –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
   - –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
   - –ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∞–∫—Ü–∏–∏/–∫–µ–π—Å—ã)
   - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**
   - –°–æ–æ–±—â–µ–Ω–∏–µ + strategy_type + context_id
   - –°—Ç–∞—Ç—É—Å: pending

5. **–û—Ç–ø—Ä–∞–≤–∫–∞** (Worker, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
   - –í —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
   - –° —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π –∑–∞–¥–µ—Ä–∂–µ–∫

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- 3 –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–∞: selling/useful/reminder
- –ü—Ä–æ—Å—Ç–∞—è —Ä–æ—Ç–∞—Ü–∏—è –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç–µ

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- ‚úÖ 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤ —Å —á–µ—Ç–∫–∏–º–∏ —Ü–µ–ª—è–º–∏
- ‚úÖ –£–º–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ 11 —ç—Ç–∞–ø–æ–≤ √ó 3 —Ç–µ–ø–ª–æ—Ç—ã = 33 –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ª—É—á—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è AI
- ‚úÖ UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑ –∫–æ–¥–∞
- ‚úÖ –ò–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- ‚úÖ Boost —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏—è—Ö

---

## üé® UI Features

### CampaignContextsManager

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- üìù –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (promo/case/content/news)
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—Ç –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è
- üéØ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- üî¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (1-5)
- üìä –°—á–µ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (–∑–µ–ª–µ–Ω–∞—è —Ç–æ—á–∫–∞)
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ/–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ (—Å–µ—Ä–∞—è —Ç–æ—á–∫–∞)
- –¶–≤–µ—Ç–Ω—ã–µ badges –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- Badge —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
- Badge —Å —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π

### TemplateManager (–æ–±–Ω–æ–≤–ª–µ–Ω)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü–æ–ª–µ `strategy_type` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –°–µ–ª–µ–∫—Ç–æ—Ä —Å 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ + "–õ—é–±–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è"
- –ü–æ—è—Å–Ω–µ–Ω–∏–µ "–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞"

### DailyCampaignQueue (–æ–±–Ω–æ–≤–ª–µ–Ω)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- Badge —Å strategy_type (—Å –∏–∫–æ–Ω–∫–∞–º–∏)
  - ‚úì Check-in
  - üí° Value
  - üìä Case
  - üéÅ Offer
  - üéØ Direct

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Backend:**
- TypeScript
- Fastify (REST API)
- Supabase (PostgreSQL)
- OpenAI GPT-4o-mini

**Frontend:**
- React + TypeScript
- TanStack Query
- shadcn/ui components
- Tailwind CSS

**Testing:**
- Jest
- Unit tests –¥–ª—è –ª–æ–≥–∏–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Supabase Dashboard
# SQL Editor ‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
services/crm-backend/migrations/007_add_strategy_system.sql
```

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ UI
2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –æ—á–µ—Ä–µ–¥—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ strategy_type –∑–∞–ø–æ–ª–Ω–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- Response rate –ø–æ strategy_type
- Conversion rate –ø–æ context_id
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —ç—Ç–∞–ø–∞–º –≤–æ—Ä–æ–Ω–∫–∏

---

## üéì –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–∑—É—á–∏—Ç—å:**

1. `STRATEGY_SYSTEM.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
2. `defaultStrategyMatrix.ts` - –º–∞—Ç—Ä–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
3. `messageExamples.ts` - –ø—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
4. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å CampaignContextsManager

**Best Practices:**
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–∫—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞–∂–Ω–æ—Å—Ç—å—é
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ strategy_type

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î —Å–æ–∑–¥–∞–Ω–∞
- [x] TypeScript —Ç–∏–ø—ã –∏ –º–∞—Ç—Ä–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- [x] –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (strategySelector)
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ (contextManager)
- [x] –ü—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- [x] –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–∞
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ messageGenerator
- [x] API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- [x] UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [x] Unit —Ç–µ—Å—Ç—ã
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

**–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:** Development Team  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2024-11-14

