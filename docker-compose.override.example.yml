# LOCAL DEVELOPMENT OVERRIDES
# Этот файл автоматически применяется при docker-compose up
# На проде НЕ используется (там docker-compose -f docker-compose.yml up)

services:
  agent-brain:
    environment:
      - CRON_ENABLED=false
      - HOURLY_CRON_ENABLED=false

  # Moltbot - временно включен для тестирования onboarding
  # (один Telegram bot token не может работать на двух инстансах одновременно)
  # moltbot:
  #   scale: 0  # ВРЕМЕННО ЗАКОММЕНТИРОВАНО для локального тестирования

  # Frontend - локальная сборка с development API URLs (localhost:8082)
  frontend:
    build:
      context: ./services/frontend
      args:
        BUILD_MODE: development
        VITE_SUPABASE_URL: ${VITE_SUPABASE_URL}
        VITE_SUPABASE_ANON_KEY: ${VITE_SUPABASE_ANON_KEY}
    ports:
      - "8081:80"

  # Nginx - используем локальную конфигурацию без SSL
  nginx:
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
