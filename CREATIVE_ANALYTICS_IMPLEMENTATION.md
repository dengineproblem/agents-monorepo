# ‚úÖ Creative Analytics - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üéØ –ó–∞–¥–∞—á–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –∫—Ä–µ–∞—Ç–∏–≤–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –†–µ–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ production –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫—Ä–µ–∞—Ç–∏–≤–∞
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

**–†–µ—à–µ–Ω–∏–µ:**
–ù–æ–≤—ã–π API endpoint, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (production > test)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π LLM –∞–Ω–∞–ª–∏–∑ (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤)
- ‚úÖ –ö–µ—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 10 –º–∏–Ω—É—Ç (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞

---

## üì¶ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ù–æ–≤—ã–π API Endpoint**

```
GET /api/analyzer/creative-analytics/:user_creative_id?user_id=xxx
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï–¥–∏–Ω—ã–π endpoint –¥–ª—è –≤—Å–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (production/test)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 10 –º–∏–Ω—É—Ç
- –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞ –∫–∞–∫ –≤ —Ç–µ—Å—Ç–∞—Ö

### 2. **–§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è production –º–µ—Ç—Ä–∏–∫**

`fetchProductionMetrics(adAccountId, accessToken, fbCreativeId)`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –î–µ—Ä–≥–∞–µ—Ç Facebook Graph API (lifetime –ø–µ—Ä–∏–æ–¥)
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –≤—Å–µ–º ads —Å —ç—Ç–∏–º –∫—Ä–µ–∞—Ç–∏–≤–æ–º
- –í–∫–ª—é—á–∞–µ—Ç –≤–∏–¥–µ–æ –º–µ—Ç—Ä–∏–∫–∏ (25%, 50%, 75%, 95%)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π `creative_tests`

### 3. **–°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–æ—Å—Ç–æ–π Map –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞
- TTL: 10 –º–∏–Ω—É—Ç
- –ö–ª—é—á: `analytics_${user_creative_id}`

**–õ–æ–≥–∏–∫–∞:**
```
–ó–∞–ø—Ä–æ—Å 1 ‚Üí Facebook API + LLM ‚Üí –ö–µ—à (3-5 —Å–µ–∫)
–ó–∞–ø—Ä–æ—Å 2 ‚Üí –ö–µ—à ‚Üí –û—Ç–≤–µ—Ç (<100ms)
–ó–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ 10+ –º–∏–Ω ‚Üí Facebook API + LLM ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞
```

### 4. **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞**

```javascript
if (–∫—Ä–µ–∞—Ç–∏–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production) {
  –∏—Å—Ç–æ—á–Ω–∏–∫ = 'production';
  –¥–∞–Ω–Ω—ã–µ = –∏–∑ Facebook API (lifetime);
} else if (–µ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç) {
  –∏—Å—Ç–æ—á–Ω–∏–∫ = 'test';
  –¥–∞–Ω–Ω—ã–µ = –∏–∑ creative_tests;
} else {
  –∏—Å—Ç–æ—á–Ω–∏–∫ = 'none';
  –¥–∞–Ω–Ω—ã–µ = null;
}
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **services/agent-brain/src/analyzerService.js**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–µ—à–∞ (—Å—Ç—Ä–æ–∫–∏ 23-26)
- Helper —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 28-55):
  - `getCachedAnalytics()`
  - `setCachedAnalytics()`
  - `normalizeAdAccountId()`
- –§—É–Ω–∫—Ü–∏—è `fetchProductionMetrics()` (—Å—Ç—Ä–æ–∫–∏ 57-201)
- –ù–æ–≤—ã–π endpoint `/api/analyzer/creative-analytics/:id` (—Å—Ç—Ä–æ–∫–∏ 420-697)

**–ù–ï –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `/api/analyzer/analyze-test`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `analyzeCreativeTest()` –∏–∑ `creativeAnalyzer.js`
- ‚úÖ –ü—Ä–æ–º–ø—Ç –¥–ª—è LLM
- ‚úÖ –§–æ—Ä–º–∞—Ç —Å–∫–æ—Ä–∏–Ω–≥–∞

**–†–∞–∑–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ: ~280 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- –£–¥–∞–ª–µ–Ω–æ: 0 —Å—Ç—Ä–æ–∫
- –ò–∑–º–µ–Ω–µ–Ω–æ: 0 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö endpoint'–æ–≤

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **CREATIVE_ANALYTICS_API.md** (300+ —Å—Ç—Ä–æ–∫)
   - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **CREATIVE_ANALYTICS_QUICK_START.md** (250+ —Å—Ç—Ä–æ–∫)
   - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–æ–º
   - –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

3. **CREATIVE_ANALYTICS_IMPLEMENTATION.md** (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
   - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
   - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

4. **test-creative-analytics.sh** (–∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# 1. Health check
curl http://localhost:7081/health

# 2. –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
curl "http://localhost:7081/api/analyzer/creative-analytics/CREATIVE_ID?user_id=USER_ID"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–µ—à (–≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –±—ã—Å—Ç—Ä—ã–π)
curl "http://localhost:7081/api/analyzer/creative-analytics/CREATIVE_ID?user_id=USER_ID"

# 4. Force refresh
curl "http://localhost:7081/api/analyzer/creative-analytics/CREATIVE_ID?user_id=USER_ID&force=true"
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
./test-creative-analytics.sh CREATIVE_ID USER_ID
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ Health check —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (—Å LLM)
- ‚úÖ –í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å (–∏–∑ –∫–µ—à–∞, –±—ã—Å—Ç—Ä–æ)
- ‚úÖ Force refresh
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (404, 400)

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–ª–æ–∫-—Å—Ö–µ–º–∞

```
–§—Ä–æ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞
    ‚îú‚îÄ –ï—Å—Ç—å –≤ –∫–µ—à–µ? ‚Üí –í–µ—Ä–Ω—É—Ç—å –∏–∑ –∫–µ—à–∞ (–±—ã—Å—Ç—Ä–æ)
    ‚îî‚îÄ –ù–µ—Ç ‚Üí –ò–¥–µ–º –¥–∞–ª—å—à–µ
         ‚Üì
–ü–æ–ª—É—á–∏—Ç—å –∫—Ä–µ–∞—Ç–∏–≤ –∏–∑ Supabase
    ‚Üì
–ü–æ–ª—É—á–∏—Ç—å user_account (access_token, ad_account_id)
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –µ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç?
    ‚Üì
–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å production –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Facebook API
    ‚îú‚îÄ –ï—Å—Ç—å production? ‚Üí –ò—Å—Ç–æ—á–Ω–∏–∫ = production
    ‚îî‚îÄ –ù–µ—Ç ‚Üí –ò—Å—Ç–æ—á–Ω–∏–∫ = test (–µ—Å–ª–∏ –±—ã–ª)
         ‚Üì
–ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é
    ‚Üì
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    ‚Üì
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ analyzeCreativeTest() ‚Üê –°–£–©–ï–°–¢–í–£–Æ–©–ê–Ø –§–£–ù–ö–¶–ò–Ø!
    ‚Üì
–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–µ—à (10 –º–∏–Ω—É—Ç)
    ‚Üì
–í–µ—Ä–Ω—É—Ç—å –æ—Ç–≤–µ—Ç —Ñ—Ä–æ–Ω—Ç—É
```

### –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é `analyzeCreativeTest()`
   - –ù–µ –¥—É–±–ª–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç
   - –ù–µ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é LLM –ª–æ–≥–∏–∫—É

2. **–ö–µ—à –≤ –ø–∞–º—è—Ç–∏**
   - –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Map)
   - –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ë–î
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞

3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç production**
   - –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ > —Ç–µ—Å—Ç
   - –ë–æ–ª—å—à–µ –ø–æ–∫–∞–∑–æ–≤ = –Ω–∞–¥–µ–∂–Ω–µ–µ
   - –¢–µ—Å—Ç –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

4. **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**
   - –ú–µ—Ç—Ä–∏–∫–∏ –≤ —Ü–µ–Ω—Ç–∞—Ö (–∫–∞–∫ –≤ —Ç–µ—Å—Ç–∞—Ö)
   - –í–∏–¥–µ–æ –º–µ—Ç—Ä–∏–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã
   - Score 0-100, verdict: excellent/good/average/poor

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)

```json
{
  "creative": {...},
  "data_source": "none",
  "message": "–ö—Ä–µ–∞—Ç–∏–≤ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∫–ª–∞–º–µ",
  "test": null,
  "production": null,
  "analysis": null
}
```

### –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç (production)

```json
{
  "creative": {
    "id": "abc",
    "title": "–ö—Ä–µ–∞—Ç–∏–≤",
    "direction_name": "–ò–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—è"
  },
  "data_source": "production",
  "test": {
    "exists": true,
    "metrics": {...},
    "llm_analysis": {...}
  },
  "production": {
    "in_use": true,
    "metrics": {
      "impressions": 45230,
      "cpl_cents": 198,
      "video_views_75_percent": 14000,
      ...
    }
  },
  "analysis": {
    "score": 72,
    "verdict": "good",
    "reasoning": "...",
    "video_analysis": "...",
    "text_recommendations": "...",
    "transcript_suggestions": [...],
    "based_on": "production"
  },
  "from_cache": false
}
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### LLM –∑–∞–ø—Ä–æ—Å—ã

**–ú–æ–¥–µ–ª—å:** gpt-4o  
**–¶–µ–Ω–∞:** ~$0.01-0.02 –∑–∞ –∑–∞–ø—Ä–æ—Å

**–≠–∫–æ–Ω–æ–º–∏—è —Å –∫–µ—à–µ–º:**
```
–ë–µ–∑ –∫–µ—à–∞: 100 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π = 100 –∑–∞–ø—Ä–æ—Å–æ–≤ = $1-2
–° –∫–µ—à–µ–º (10 –º–∏–Ω): 100 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π = 10-20 –∑–∞–ø—Ä–æ—Å–æ–≤ = $0.10-0.40
```

**–ó–∞—â–∏—Ç–∞:**
- –ö–µ—à: 10 –º–∏–Ω—É—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–ø–∞–º–∏—Ç—å F5 - —Ç–æ–ª—å–∫–æ 1 –∑–∞–ø—Ä–æ—Å –∫ LLM

---

## üöÄ –î–µ–ø–ª–æ–π

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
cd services/agent-brain
ANALYZER_PORT=7081 \
OPENAI_API_KEY=sk-... \
SUPABASE_URL=https://... \
SUPABASE_SERVICE_ROLE_KEY=... \
node src/analyzerService.js
```

### Docker

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
docker-compose build agent-brain

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d agent-brain

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs agents-monorepo-agent-brain-1 --tail 100 -f
```

### Production

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—É–∂–µ –µ—Å—Ç—å):**
- ‚úÖ `ANALYZER_PORT=7081`
- ‚úÖ `OPENAI_API_KEY`
- ‚úÖ `SUPABASE_URL`
- ‚úÖ `SUPABASE_SERVICE_ROLE_KEY`

**–ù–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è!**

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ö–æ–¥
- [x] –§—É–Ω–∫—Ü–∏—è fetchProductionMetrics —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Endpoint /api/analyzer/creative-analytics —Å–æ–∑–¥–∞–Ω
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (CREATIVE_ANALYTICS_API.md)
- [x] Quick Start –≥–∞–π–¥ (CREATIVE_ANALYTICS_QUICK_START.md)
- [x] –ò—Ç–æ–≥–æ–≤—ã–π summary (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [x] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (test-creative-analytics.sh)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç —Å –∫—Ä–µ–∞—Ç–∏–≤–æ–º –≤ production
- [ ] –¢–µ—Å—Ç —Å –∫—Ä–µ–∞—Ç–∏–≤–æ–º —Ç–æ–ª—å–∫–æ —Å —Ç–µ—Å—Ç–æ–º
- [ ] –¢–µ—Å—Ç —Å –∫—Ä–µ–∞—Ç–∏–≤–æ–º –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–µ—à–∞ (–≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –±—ã—Å—Ç—Ä—ã–π)
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ force refresh
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ (404, 400)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –§—Ä–æ–Ω—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ (production/test/none)
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–µ—à–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ)
1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   ./test-creative-analytics.sh CREATIVE_ID USER_ID
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω —Ä–µ–∞–ª—å–Ω—ã–π –∫—Ä–µ–∞—Ç–∏–≤:**
   - –í production (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –° —Ç–µ—Å—Ç–æ–º
   - –ë–µ–∑ –¥–∞–Ω–Ω—ã—Ö

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∫–µ—à–∞:**
   - –î–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–¥—Ä—è–¥
   - –í—Ç–æ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑ –∫–µ—à–∞ (<100ms)

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–æ–º**
5. **–î–µ–ø–ª–æ–π –Ω–∞ production**
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**

### –ë—É–¥—É—â–µ–µ (—É–ª—É—á—à–µ–Ω–∏—è)
7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫—Ä–µ–∞—Ç–∏–≤–∞–º–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
8. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫
9. –ì—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–µ–Ω–¥–æ–≤
10. Batch endpoint –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker logs agents-monorepo-agent-brain-1 --tail 100`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health: `curl http://localhost:7081/health`
- –ß–∏—Ç–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `CREATIVE_ANALYTICS_API.md`

**–í–æ–ø—Ä–æ—Å—ã:**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: —Å–º. –±–ª–æ–∫-—Å—Ö–µ–º—É –≤—ã—à–µ
- API: —Å–º. `CREATIVE_ANALYTICS_API.md`
- –ü—Ä–∏–º–µ—Ä—ã: —Å–º. `CREATIVE_ANALYTICS_QUICK_START.md`

---

## üéâ –ò—Ç–æ–≥

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ù–æ–≤—ã–π API –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ LLM
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

**–ù–µ —Å–ª–æ–º–∞–Ω–æ:**
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π flow
- ‚úÖ Endpoint `/api/analyzer/analyze-test`
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã –∏ —Å–∫–æ—Ä–∏–Ω–≥

**–ì–æ—Ç–æ–≤–æ –∫:**
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–æ–º
- ‚úÖ –î–µ–ø–ª–æ—é –Ω–∞ production

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ READY TO TEST & DEPLOY

