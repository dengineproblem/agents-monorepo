# üé® –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫—Ä–µ–∞—Ç–∏–≤—ã –≤ –æ–¥–Ω–æ–º adset

## üìÖ –î–∞—Ç–∞: 5 –æ–∫—Ç—è–±—Ä—è 2025

---

## üéØ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

**–ë–´–õ–û:** `CreateCampaignWithCreative` —Å–æ–∑–¥–∞–≤–∞–ª –∫–∞–º–ø–∞–Ω–∏—é —Å **–û–î–ù–ò–ú** –∫—Ä–µ–∞—Ç–∏–≤–æ–º

**–°–¢–ê–õ–û:** `CreateCampaignWithCreative` —Å–æ–∑–¥–∞–µ—Ç –∫–∞–º–ø–∞–Ω–∏—é —Å **1-3** –∫—Ä–µ–∞—Ç–∏–≤–∞–º–∏ –≤ **–û–î–ù–û–ú adset**

---

## üìä –°–¢–†–£–ö–¢–£–†–ê

### –î–û –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
LLM –≤—ã–∑—ã–≤–∞–µ—Ç 3 —Ä–∞–∑–∞:
  CreateCampaignWithCreative(uuid-1)
  CreateCampaignWithCreative(uuid-2)
  CreateCampaignWithCreative(uuid-3)

–†–µ–∑—É–ª—å—Ç–∞—Ç: 3 –û–¢–î–ï–õ–¨–ù–´–ï –ö–ê–ú–ü–ê–ù–ò–ò
  Campaign "–ö—Ä–µ–∞—Ç–∏–≤ 1" ‚Üí AdSet ‚Üí Ad 1
  Campaign "–ö—Ä–µ–∞—Ç–∏–≤ 2" ‚Üí AdSet ‚Üí Ad 2
  Campaign "–ö—Ä–µ–∞—Ç–∏–≤ 3" ‚Üí AdSet ‚Üí Ad 3
```

### –ü–û–°–õ–ï –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
LLM –≤—ã–∑—ã–≤–∞–µ—Ç 1 —Ä–∞–∑:
  CreateCampaignWithCreative(["uuid-1", "uuid-2", "uuid-3"])

–†–µ–∑—É–ª—å—Ç–∞—Ç: 1 –ö–ê–ú–ü–ê–ù–ò–Ø, 3 ADS –í –û–î–ù–û–ú ADSET
  Campaign "–¢–µ—Å—Ç –Ω–æ–≤—ã—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤"
    ‚îî‚îÄ AdSet "AdSet 1" ($50/–¥–µ–Ω—å)
        ‚îú‚îÄ Ad 1 ‚Üí Creative uuid-1
        ‚îú‚îÄ Ad 2 ‚Üí Creative uuid-2
        ‚îî‚îÄ Ad 3 ‚Üí Creative uuid-3
```

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–π—Å—Ç–≤–∏—è**

**–ë–´–õ–û:**
```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_id": "uuid-1",  // ‚Üê –û–¥–∏–Ω–æ—á–Ω—ã–π
    "objective": "WhatsApp",
    "campaign_name": "–¢–µ—Å—Ç",
    "daily_budget_cents": 5000
  }
}
```

**–°–¢–ê–õ–û:**
```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_ids": ["uuid-1", "uuid-2", "uuid-3"],  // ‚Üê –ú–ê–°–°–ò–í!
    "objective": "WhatsApp",
    "campaign_name": "–¢–µ—Å—Ç –Ω–æ–≤—ã—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤",
    "daily_budget_cents": 5000,
    "use_default_settings": true,
    "auto_activate": true
  }
}
```

### 2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**

–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç —Å `user_creative_id` (–æ–¥–∏–Ω–æ—á–Ω—ã–π) **–ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç**:

```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_id": "uuid-1",  // ‚Üê –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
    "objective": "WhatsApp",
    "campaign_name": "–¢–µ—Å—Ç",
    "daily_budget_cents": 5000
  }
}
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `user_creative_ids: ["uuid-1"]`

---

## üìù –ß–¢–û –ë–´–õ–û –ò–ó–ú–ï–ù–ï–ù–û

### `services/agent-service/src/workflows/createCampaignWithCreative.ts`

1. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   ```typescript
   // –ë–´–õ–û:
   user_creative_id: string;
   
   // –°–¢–ê–õ–û:
   user_creative_ids: string[]; // –ú–ê–°–°–ò–í
   ```

2. **–õ–æ–≥–∏–∫–∞:**
   - –ü–æ–ª—É—á–∞–µ–º –í–°–ï –∫—Ä–µ–∞—Ç–∏–≤—ã –∏–∑ Supabase –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
   - –°–æ–∑–¥–∞–µ–º Campaign ‚Üí AdSet (–æ–¥–∏–Ω)
   - –í —Ü–∏–∫–ª–µ —Å–æ–∑–¥–∞–µ–º Ad –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–∞
   - –í—Å–µ ads –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ–¥–∏–Ω adset

3. **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
   ```typescript
   return {
     success: true,
     campaign_id: "123",
     adset_id: "456",
     ads: [
       { ad_id: "ad1", user_creative_id: "uuid-1", fb_creative_id: "fb1" },
       { ad_id: "ad2", user_creative_id: "uuid-2", fb_creative_id: "fb2" },
       { ad_id: "ad3", user_creative_id: "uuid-3", fb_creative_id: "fb3" }
     ],
     ads_count: 3
   };
   ```

### `services/agent-service/src/routes/actions.ts`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:
```typescript
// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
let creative_ids: string[];
if (p.user_creative_ids && Array.isArray(p.user_creative_ids)) {
  creative_ids = p.user_creative_ids; // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–º–∞—Å—Å–∏–≤)
} else if (p.user_creative_id) {
  creative_ids = [p.user_creative_id]; // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–æ–¥–∏–Ω–æ—á–Ω—ã–π)
} else {
  throw new Error('user_creative_id or user_creative_ids required');
}
```

### `services/agent-brain/src/server.js`

–û–±–Ω–æ–≤–ª–µ–Ω—ã:
1. –û–ø–∏—Å–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –ø—Ä–æ–º–ø—Ç–µ
2. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
3. –ü—Ä–∏–º–µ—Ä—ã 3A –∏ 3B

---

## üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê

### 1. **Facebook Machine Learning**
- Facebook —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π –∫—Ä–µ–∞—Ç–∏–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É ads
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π

### 2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–ª—è LLM**
- **–î–û:** 3 –≤—ã–∑–æ–≤–∞ CreateCampaignWithCreative
- **–ü–û–°–õ–ï:** 1 –≤—ã–∑–æ–≤ —Å –º–∞—Å—Å–∏–≤–æ–º

### 3. **–ï–¥–∏–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è**
- –û–¥–Ω–∞ –∫–∞–º–ø–∞–Ω–∏—è ‚Üí –ø—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å
- –û–¥–∏–Ω –±—é–¥–∂–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–µ–∂–¥—É ads
- –û–¥–∏–Ω adset ‚Üí –µ–¥–∏–Ω—ã–π —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥

### 4. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**
- –ú–µ–Ω—å—à–µ –∫–∞–º–ø–∞–Ω–∏–π –≤ –∞–∫–∫–∞—É–Ω—Ç–µ
- –ë–æ–ª–µ–µ —á–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –õ–µ–≥—á–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üìö –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: 3 –∫—Ä–µ–∞—Ç–∏–≤–∞ (optimal)
```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_ids": ["uuid-1", "uuid-2", "uuid-3"],
    "objective": "WhatsApp",
    "campaign_name": "–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤",
    "daily_budget_cents": 5000,
    "use_default_settings": true,
    "auto_activate": true
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Campaign "–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤"
  ‚îî‚îÄ AdSet "–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ - AdSet 1" ($50/–¥–µ–Ω—å)
      ‚îú‚îÄ Ad 1 (–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ - Ad 1) ‚Üí Creative uuid-1
      ‚îú‚îÄ Ad 2 (–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ - Ad 2) ‚Üí Creative uuid-2
      ‚îî‚îÄ Ad 3 (–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è ‚Äî –¢–µ—Å—Ç 3 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤ - Ad 3) ‚Üí Creative uuid-3
```

### –ü—Ä–∏–º–µ—Ä 2: 2 –∫—Ä–µ–∞—Ç–∏–≤–∞
```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_ids": ["uuid-2", "uuid-5"],
    "objective": "WhatsApp",
    "campaign_name": "–¢–µ—Å—Ç 2 –∫—Ä–µ–∞—Ç–∏–≤–æ–≤",
    "daily_budget_cents": 3000,
    "use_default_settings": true,
    "auto_activate": true
  }
}
```

### –ü—Ä–∏–º–µ—Ä 3: 1 –∫—Ä–µ–∞—Ç–∏–≤ (backward compatible)
```json
{
  "type": "CreateCampaignWithCreative",
  "params": {
    "user_creative_id": "uuid-7",  // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
    "objective": "WhatsApp",
    "campaign_name": "–¢–µ—Å—Ç –æ–¥–Ω–æ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–∞",
    "daily_budget_cents": 2000,
    "use_default_settings": true,
    "auto_activate": true
  }
}
```

---

## üß† –õ–û–ì–ò–ö–ê BRAIN AGENT

### –ü—Ä–∞–≤–∏–ª–∞:
1. **–ï—Å–ª–∏ unused_creatives.length ‚â• 3** ‚Üí –ø–µ—Ä–µ–¥–∞—Ç—å –í–°–ï 3 –≤ –º–∞—Å—Å–∏–≤–µ
2. **–ï—Å–ª–∏ unused_creatives.length = 2** ‚Üí –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±–∞
3. **–ï—Å–ª–∏ unused_creatives.length = 1** ‚Üí –ø–µ—Ä–µ–¥–∞—Ç—å –æ–¥–∏–Ω (–º–∞—Å—Å–∏–≤ –∏–ª–∏ –æ–¥–∏–Ω–æ—á–Ω—ã–π)

### –ü—Ä–∏–º–µ—Ä –∏–∑ –ø—Ä–æ–º–ø—Ç–∞:
```javascript
'- –í–ê–ñ–ù–û: –ü–µ—Ä–µ–¥–∞–≤–∞–π –í–°–ï user_creative_ids –û–î–ù–ò–ú –≤—ã–∑–æ–≤–æ–º –≤ –ú–ê–°–°–ò–í–ï: user_creative_ids: ["uuid-1", "uuid-2", "uuid-3"]'
'- –†–µ–∑—É–ª—å—Ç–∞—Ç: 1 Campaign ‚Üí 1 AdSet ‚Üí 3 Ads (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥—ã–π –∫—Ä–µ–∞—Ç–∏–≤)'
'- Facebook —Å–∞–º –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à–∏–π –∫—Ä–µ–∞—Ç–∏–≤ —á–µ—Ä–µ–∑ machine learning!'
```

---

## üéØ –ò–¢–û–ì

### –ß–¢–û –ë–´–õ–û:
- ‚ùå –ù–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π
- ‚ùå –ö–∞–∂–¥–∞—è –∫–∞–º–ø–∞–Ω–∏—è = –æ—Ç–¥–µ–ª—å–Ω—ã–π adset
- ‚ùå LLM –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- ‚ùå –°–ª–æ–∂–Ω–µ–µ —É–ø—Ä–∞–≤–ª—è—Ç—å

### –ß–¢–û –°–¢–ê–õ–û:
- ‚úÖ **–û–¥–Ω–∞ –∫–∞–º–ø–∞–Ω–∏—è, –Ω–µ—Å–∫–æ–ª—å–∫–æ ads –≤ –æ–¥–Ω–æ–º adset**
- ‚úÖ **LLM –≤—ã–∑—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –û–î–ò–ù —Ä–∞–∑ —Å –º–∞—Å—Å–∏–≤–æ–º**
- ‚úÖ **Facebook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π –∫—Ä–µ–∞—Ç–∏–≤**
- ‚úÖ **–ü—Ä–æ—â–µ —É–ø—Ä–∞–≤–ª—è—Ç—å, —á–∏—â–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- `BUDGET_LOGIC_UPDATE.md` ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –±—é–¥–∂–µ—Ç–∞
- `REANIMATION_STRATEGY.md` ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–Ω–∏–º–∞—Ü–∏–∏
- `UNUSED_CREATIVES.md` ‚Äî —Å–∏—Å—Ç–µ–º–∞ unused_creatives
- `DEFAULT_AD_SETTINGS.md` ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ
