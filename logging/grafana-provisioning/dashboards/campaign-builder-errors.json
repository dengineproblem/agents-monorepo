{
  "id": null,
  "title": "Campaign Builder Workflow Overview",
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "panels": [
    {
      "type": "timeseries",
      "title": "Errors by Workflow",
      "description": "Количество ошибок за 5 минут с группировкой по значению workflow.",
      "targets": [
        {
          "expr": "sum by (workflow) (count_over_time({module=\"campaignBuilderRoutes\",level=\"error\"}[5m]))",
          "legendFormat": "{{workflow}}"
        }
      ],
      "span": 12
    },
    {
      "type": "timeseries",
      "title": "Warnings by Workflow",
      "description": "Количество предупреждений за 5 минут для каждого workflow.",
      "targets": [
        {
          "expr": "sum by (workflow) (count_over_time({module=\"campaignBuilderRoutes\",level=\"warn\"}[5m]))",
          "legendFormat": "{{workflow}}"
        }
      ],
      "span": 12
    },
    {
      "type": "table",
      "title": "Recent Campaign Builder Errors",
      "description": "Последние ошибки Campaign Builder с указанием workflow и подсказок Facebook.",
      "targets": [
        {
          "expr": "{module=\"campaignBuilderRoutes\",level=\"error\",workflow!=\"\"} | logfmt"
        }
      ],
      "span": 12
    },
    {
      "type": "table",
      "title": "Recent Campaign Builder Warnings",
      "description": "Свежие предупреждения с лейблом workflow для быстрой диагностики.",
      "targets": [
        {
          "expr": "{module=\"campaignBuilderRoutes\",level=\"warn\",workflow!=\"\"} | logfmt"
        }
      ],
      "span": 12
    }
  ],
  "schemaVersion": 38,
  "version": 2
}
