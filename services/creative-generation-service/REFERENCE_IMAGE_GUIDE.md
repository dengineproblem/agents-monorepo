# üì∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤. Gemini 3 Pro Image Preview –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π –∫—Ä–µ–∞—Ç–∏–≤ –≤ –ø–æ—Ö–æ–∂–µ–º —Å—Ç–∏–ª–µ.

## –ß—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

- ‚úÖ **Base64** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ base64
- ‚úÖ **URL** - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ

## –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞

### POST `/generate-creative`

```json
{
  "user_id": "string",
  "offer": "string",
  "bullets": "string",
  "profits": "string",
  "cta": "string",
  "direction_id": "string (optional)",
  "reference_image": "string (optional)",
  "reference_image_type": "base64 | url (optional)",
  "reference_image_prompt": "string (optional)"
}
```

### –ù–æ–≤—ã–µ –ø–æ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `reference_image` | string | –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (base64 —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ URL) |
| `reference_image_type` | `'base64'` \| `'url'` | –¢–∏–ø –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| `reference_image_prompt` | string | –ú–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç: –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ URL —Å –º–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç–æ–º

```bash
curl -X POST http://localhost:8085/generate-creative \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user-123",
    "offer": "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã",
    "bullets": "‚Ä¢ –î–æ—Å—Ç—É–ø –Ω–∞–≤—Å–µ–≥–¥–∞\n‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7",
    "profits": "–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
    "cta": "–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É",
    "reference_image": "https://example.com/my-brand-image.jpg",
    "reference_image_type": "url",
    "reference_image_prompt": "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É –∏ —Å—Ç–∏–ª—å —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è"
  }'
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ base64

```bash
curl -X POST http://localhost:8085/generate-creative \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user-123",
    "offer": "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã",
    "bullets": "‚Ä¢ –î–æ—Å—Ç—É–ø –Ω–∞–≤—Å–µ–≥–¥–∞\n‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7",
    "profits": "–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
    "cta": "–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É",
    "reference_image": "/9j/4AAQSkZJRgABAQEAYABgAAD...",
    "reference_image_type": "base64"
  }'
```

### 3. –ë–µ–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)

```bash
curl -X POST http://localhost:8085/generate-creative \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user-123",
    "offer": "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –≤—Å–µ –∫—É—Ä—Å—ã",
    "bullets": "‚Ä¢ –î–æ—Å—Ç—É–ø –Ω–∞–≤—Å–µ–≥–¥–∞\n‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç\n‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7",
    "profits": "–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ",
    "cta": "–ü–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É"
  }'
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

1. **–ê–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞**: Gemini –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É, —Å—Ç–∏–ª—å, –∫–æ–º–ø–æ–∑–∏—Ü–∏—é —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è**: –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫—Ä–µ–∞—Ç–∏–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞
3. **–ù–∞–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞**: –î–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤–∞—à–∏ —Ç–µ–∫—Å—Ç—ã (offer, bullets, profits, cta)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–æ–≤

### –ë—Ä–µ–Ω–¥–∏–Ω–≥
–ü–µ—Ä–µ–¥–∞–π—Ç–µ –ª–æ–≥–æ—Ç–∏–ø –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫—Ä–µ–∞—Ç–∏–≤ –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è.

```json
{
  "reference_image": "https://cdn.example.com/brand-logo.png",
  "reference_image_type": "url"
}
```

### –°—Ç–∏–ª–∏—Å—Ç–∏–∫–∞
–ü–æ–∫–∞–∂–∏—Ç–µ –ø—Ä–∏–º–µ—Ä –¥–∏–∑–∞–π–Ω–∞ –∏–∑ Pinterest/Behance, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å.

```json
{
  "reference_image": "https://images.unsplash.com/photo-example",
  "reference_image_type": "url"
}
```

### –ö–æ–º–ø–æ–∑–∏—Ü–∏—è
–£–∫–∞–∂–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π –∫—Ä–µ–∞—Ç–∏–≤.

## –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ base64

### JavaScript/Node.js

```javascript
// –ò–∑ —Ñ–∞–π–ª–∞
const fs = require('fs');
const imageBuffer = fs.readFileSync('path/to/image.jpg');
const base64Image = imageBuffer.toString('base64');

// –ò–∑ URL
const response = await fetch('https://example.com/image.jpg');
const arrayBuffer = await response.arrayBuffer();
const base64Image = Buffer.from(arrayBuffer).toString('base64');
```

### Python

```python
import base64

# –ò–∑ —Ñ–∞–π–ª–∞
with open('path/to/image.jpg', 'rb') as f:
    base64_image = base64.b64encode(f.read()).decode('utf-8')

# –ò–∑ URL
import requests
response = requests.get('https://example.com/image.jpg')
base64_image = base64.b64encode(response.content).decode('utf-8')
```

### Bash

```bash
base64 -i path/to/image.jpg
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç (reference_image_prompt)?

**–ú–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç** - —ç—Ç–æ –∫—Ä–∞—Ç–∫–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä—è—Å–Ω—è–µ—Ç AI, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

### –ü—Ä–∏–º–µ—Ä—ã –º–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç–æ–≤:

```json
{
  "reference_image_prompt": "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É –∏ —Å—Ç–∏–ª—å —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∏"
}
```

```json
{
  "reference_image_prompt": "–ü–æ–≤—Ç–æ—Ä–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞"
}
```

```json
{
  "reference_image_prompt": "–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å, –æ—Å–æ–±–µ–Ω–Ω–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ –æ–∫—Ä—É–≥–ª—ã–µ —Ñ–æ—Ä–º—ã"
}
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏-–ø—Ä–æ–º–ø—Ç?

- ‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã** —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ (—Ü–≤–µ—Ç–∞, —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞, –∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
- ‚úÖ –ö–æ–≥–¥–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å —Å–æ–¥–µ—Ä–∂–∏—Ç **–º–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤**, –Ω–æ –≤–∞–∂–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ
- ‚úÖ –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è **—Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è** - —É–∫–∞–∂–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±—Ä–µ–Ω–¥–∞
- ‚ùå –ú–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã AI —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏–ª, —á—Ç–æ –≤–∞–∂–Ω–æ

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPEG, PNG, GIF, WebP
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–∏–º–∏—Ç–æ–≤ Gemini API
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: Gemini 3 Pro Image Preview –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –≤—Ö–æ–¥, –Ω–æ –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:

```bash
# Development
npm run dev

# Production
pm2 logs creative-generation-service
```

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏**: https://ai.google.dev/gemini-api/docs/models?hl=ru#gemini-3-pro-image-preview

